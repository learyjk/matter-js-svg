(()=>{var fe=Object.create;var re=Object.defineProperty;var ue=Object.getOwnPropertyDescriptor;var ce=Object.getOwnPropertyNames;var ve=Object.getPrototypeOf,ge=Object.prototype.hasOwnProperty;var he=(T,R)=>()=>(R||T((R={exports:{}}).exports,R),R.exports);var xe=(T,R,p,e)=>{if(R&&typeof R=="object"||typeof R=="function")for(let o of ce(R))!ge.call(T,o)&&o!==p&&re(T,o,{get:()=>R[o],enumerable:!(e=ue(R,o))||e.enumerable});return T};var me=(T,R,p)=>(p=T!=null?fe(ve(T)):{},xe(R||!T||!T.__esModule?re(p,"default",{value:T,enumerable:!0}):p,T));var ae=he((Z,j)=>{(function(R,p){typeof Z=="object"&&typeof j=="object"?j.exports=p():typeof define=="function"&&define.amd?define("Matter",[],p):typeof Z=="object"?Z.Matter=p():R.Matter=p()})(Z,function(){return function(T){var R={};function p(e){if(R[e])return R[e].exports;var o=R[e]={i:e,l:!1,exports:{}};return T[e].call(o.exports,o,o.exports,p),o.l=!0,o.exports}return p.m=T,p.c=R,p.d=function(e,o,s){p.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:s})},p.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p.t=function(e,o){if(o&1&&(e=p(e)),o&8||o&4&&typeof e=="object"&&e&&e.__esModule)return e;var s=Object.create(null);if(p.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),o&2&&typeof e!="string")for(var i in e)p.d(s,i,function(h){return e[h]}.bind(null,i));return s},p.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return p.d(o,"a",o),o},p.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},p.p="",p(p.s=21)}([function(T,R){var p={};T.exports=p,function(){p._nextId=0,p._seed=0,p._nowStartTime=+new Date,p._warnedOnce={},p._decomp=null,p.extend=function(o,s){var i,h,a;typeof s=="boolean"?(i=2,a=s):(i=1,a=!0);for(var f=i;f<arguments.length;f++){var r=arguments[f];if(r)for(var l in r)a&&r[l]&&r[l].constructor===Object&&(!o[l]||o[l].constructor===Object)?(o[l]=o[l]||{},p.extend(o[l],a,r[l])):o[l]=r[l]}return o},p.clone=function(o,s){return p.extend({},s,o)},p.keys=function(o){if(Object.keys)return Object.keys(o);var s=[];for(var i in o)s.push(i);return s},p.values=function(o){var s=[];if(Object.keys){for(var i=Object.keys(o),h=0;h<i.length;h++)s.push(o[i[h]]);return s}for(var a in o)s.push(o[a]);return s},p.get=function(o,s,i,h){s=s.split(".").slice(i,h);for(var a=0;a<s.length;a+=1)o=o[s[a]];return o},p.set=function(o,s,i,h,a){var f=s.split(".").slice(h,a);return p.get(o,s,0,-1)[f[f.length-1]]=i,i},p.shuffle=function(o){for(var s=o.length-1;s>0;s--){var i=Math.floor(p.random()*(s+1)),h=o[s];o[s]=o[i],o[i]=h}return o},p.choose=function(o){return o[Math.floor(p.random()*o.length)]},p.isElement=function(o){return typeof HTMLElement<"u"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},p.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},p.isFunction=function(o){return typeof o=="function"},p.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},p.isString=function(o){return toString.call(o)==="[object String]"},p.clamp=function(o,s,i){return o<s?s:o>i?i:o},p.sign=function(o){return o<0?-1:1},p.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-p._nowStartTime},p.random=function(o,s){return o=typeof o<"u"?o:0,s=typeof s<"u"?s:1,o+e()*(s-o)};var e=function(){return p._seed=(p._seed*9301+49297)%233280,p._seed/233280};p.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},p.logLevel=1,p.log=function(){console&&p.logLevel>0&&p.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},p.info=function(){console&&p.logLevel>0&&p.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},p.warn=function(){console&&p.logLevel>0&&p.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},p.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");p._warnedOnce[o]||(p.warn(o),p._warnedOnce[o]=!0)},p.deprecated=function(o,s,i){o[s]=p.chain(function(){p.warnOnce("\u{1F505} deprecated \u{1F505}",i)},o[s])},p.nextId=function(){return p._nextId++},p.indexOf=function(o,s){if(o.indexOf)return o.indexOf(s);for(var i=0;i<o.length;i++)if(o[i]===s)return i;return-1},p.map=function(o,s){if(o.map)return o.map(s);for(var i=[],h=0;h<o.length;h+=1)i.push(s(o[h]));return i},p.topologicalSort=function(o){var s=[],i=[],h=[];for(var a in o)!i[a]&&!h[a]&&p._topologicalSort(a,i,h,o,s);return s},p._topologicalSort=function(o,s,i,h,a){var f=h[o]||[];i[o]=!0;for(var r=0;r<f.length;r+=1){var l=f[r];i[l]||s[l]||p._topologicalSort(l,s,i,h,a)}i[o]=!1,s[o]=!0,a.push(o)},p.chain=function(){for(var o=[],s=0;s<arguments.length;s+=1){var i=arguments[s];i._chained?o.push.apply(o,i._chained):o.push(i)}var h=function(){for(var a,f=new Array(arguments.length),r=0,l=arguments.length;r<l;r++)f[r]=arguments[r];for(r=0;r<o.length;r+=1){var t=o[r].apply(a,f);typeof t<"u"&&(a=t)}return a};return h._chained=o,h},p.chainPathBefore=function(o,s,i){return p.set(o,s,p.chain(i,p.get(o,s)))},p.chainPathAfter=function(o,s,i){return p.set(o,s,p.chain(p.get(o,s),i))},p.setDecomp=function(o){p._decomp=o},p.getDecomp=function(){var o=p._decomp;try{!o&&typeof window<"u"&&(o=window.decomp),!o&&typeof global<"u"&&(o=global.decomp)}catch{o=null}return o}}()},function(T,R){var p={};T.exports=p,function(){p.create=function(e){var o={min:{x:0,y:0},max:{x:0,y:0}};return e&&p.update(o,e),o},p.update=function(e,o,s){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var i=0;i<o.length;i++){var h=o[i];h.x>e.max.x&&(e.max.x=h.x),h.x<e.min.x&&(e.min.x=h.x),h.y>e.max.y&&(e.max.y=h.y),h.y<e.min.y&&(e.min.y=h.y)}s&&(s.x>0?e.max.x+=s.x:e.min.x+=s.x,s.y>0?e.max.y+=s.y:e.min.y+=s.y)},p.contains=function(e,o){return o.x>=e.min.x&&o.x<=e.max.x&&o.y>=e.min.y&&o.y<=e.max.y},p.overlaps=function(e,o){return e.min.x<=o.max.x&&e.max.x>=o.min.x&&e.max.y>=o.min.y&&e.min.y<=o.max.y},p.translate=function(e,o){e.min.x+=o.x,e.max.x+=o.x,e.min.y+=o.y,e.max.y+=o.y},p.shift=function(e,o){var s=e.max.x-e.min.x,i=e.max.y-e.min.y;e.min.x=o.x,e.max.x=o.x+s,e.min.y=o.y,e.max.y=o.y+i}}()},function(T,R){var p={};T.exports=p,function(){p.create=function(e,o){return{x:e||0,y:o||0}},p.clone=function(e){return{x:e.x,y:e.y}},p.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},p.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},p.rotate=function(e,o,s){var i=Math.cos(o),h=Math.sin(o);s||(s={});var a=e.x*i-e.y*h;return s.y=e.x*h+e.y*i,s.x=a,s},p.rotateAbout=function(e,o,s,i){var h=Math.cos(o),a=Math.sin(o);i||(i={});var f=s.x+((e.x-s.x)*h-(e.y-s.y)*a);return i.y=s.y+((e.x-s.x)*a+(e.y-s.y)*h),i.x=f,i},p.normalise=function(e){var o=p.magnitude(e);return o===0?{x:0,y:0}:{x:e.x/o,y:e.y/o}},p.dot=function(e,o){return e.x*o.x+e.y*o.y},p.cross=function(e,o){return e.x*o.y-e.y*o.x},p.cross3=function(e,o,s){return(o.x-e.x)*(s.y-e.y)-(o.y-e.y)*(s.x-e.x)},p.add=function(e,o,s){return s||(s={}),s.x=e.x+o.x,s.y=e.y+o.y,s},p.sub=function(e,o,s){return s||(s={}),s.x=e.x-o.x,s.y=e.y-o.y,s},p.mult=function(e,o){return{x:e.x*o,y:e.y*o}},p.div=function(e,o){return{x:e.x/o,y:e.y/o}},p.perp=function(e,o){return o=o===!0?-1:1,{x:o*-e.y,y:o*e.x}},p.neg=function(e){return{x:-e.x,y:-e.y}},p.angle=function(e,o){return Math.atan2(o.y-e.y,o.x-e.x)},p._temp=[p.create(),p.create(),p.create(),p.create(),p.create(),p.create()]}()},function(T,R,p){var e={};T.exports=e;var o=p(2),s=p(0);(function(){e.create=function(i,h){for(var a=[],f=0;f<i.length;f++){var r=i[f],l={x:r.x,y:r.y,index:f,body:h,isInternal:!1};a.push(l)}return a},e.fromPath=function(i,h){var a=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return i.replace(a,function(r,l,t){f.push({x:parseFloat(l),y:parseFloat(t)})}),e.create(f,h)},e.centre=function(i){for(var h=e.area(i,!0),a={x:0,y:0},f,r,l,t=0;t<i.length;t++)l=(t+1)%i.length,f=o.cross(i[t],i[l]),r=o.mult(o.add(i[t],i[l]),f),a=o.add(a,r);return o.div(a,6*h)},e.mean=function(i){for(var h={x:0,y:0},a=0;a<i.length;a++)h.x+=i[a].x,h.y+=i[a].y;return o.div(h,i.length)},e.area=function(i,h){for(var a=0,f=i.length-1,r=0;r<i.length;r++)a+=(i[f].x-i[r].x)*(i[f].y+i[r].y),f=r;return h?a/2:Math.abs(a)/2},e.inertia=function(i,h){for(var a=0,f=0,r=i,l,t,n=0;n<r.length;n++)t=(n+1)%r.length,l=Math.abs(o.cross(r[t],r[n])),a+=l*(o.dot(r[t],r[t])+o.dot(r[t],r[n])+o.dot(r[n],r[n])),f+=l;return h/6*(a/f)},e.translate=function(i,h,a){a=typeof a<"u"?a:1;var f=i.length,r=h.x*a,l=h.y*a,t;for(t=0;t<f;t++)i[t].x+=r,i[t].y+=l;return i},e.rotate=function(i,h,a){if(h!==0){var f=Math.cos(h),r=Math.sin(h),l=a.x,t=a.y,n=i.length,v,u,y,C;for(C=0;C<n;C++)v=i[C],u=v.x-l,y=v.y-t,v.x=l+(u*f-y*r),v.y=t+(u*r+y*f);return i}},e.contains=function(i,h){for(var a=h.x,f=h.y,r=i.length,l=i[r-1],t,n=0;n<r;n++){if(t=i[n],(a-l.x)*(t.y-l.y)+(f-l.y)*(l.x-t.x)>0)return!1;l=t}return!0},e.scale=function(i,h,a,f){if(h===1&&a===1)return i;f=f||e.centre(i);for(var r,l,t=0;t<i.length;t++)r=i[t],l=o.sub(r,f),i[t].x=f.x+l.x*h,i[t].y=f.y+l.y*a;return i},e.chamfer=function(i,h,a,f,r){typeof h=="number"?h=[h]:h=h||[8],a=typeof a<"u"?a:-1,f=f||2,r=r||14;for(var l=[],t=0;t<i.length;t++){var n=i[t-1>=0?t-1:i.length-1],v=i[t],u=i[(t+1)%i.length],y=h[t<h.length?t:h.length-1];if(y===0){l.push(v);continue}var C=o.normalise({x:v.y-n.y,y:n.x-v.x}),c=o.normalise({x:u.y-v.y,y:v.x-u.x}),g=Math.sqrt(2*Math.pow(y,2)),m=o.mult(s.clone(C),y),x=o.normalise(o.mult(o.add(C,c),.5)),S=o.sub(v,o.mult(x,g)),w=a;a===-1&&(w=Math.pow(y,.32)*1.75),w=s.clamp(w,f,r),w%2===1&&(w+=1);for(var d=Math.acos(o.dot(C,c)),M=d/w,P=0;P<w;P++)l.push(o.add(o.rotate(m,M*P),S))}return l},e.clockwiseSort=function(i){var h=e.mean(i);return i.sort(function(a,f){return o.angle(h,a)-o.angle(h,f)}),i},e.isConvex=function(i){var h=0,a=i.length,f,r,l,t;if(a<3)return null;for(f=0;f<a;f++)if(r=(f+1)%a,l=(f+2)%a,t=(i[r].x-i[f].x)*(i[l].y-i[r].y),t-=(i[r].y-i[f].y)*(i[l].x-i[r].x),t<0?h|=1:t>0&&(h|=2),h===3)return!1;return h!==0?!0:null},e.hull=function(i){var h=[],a=[],f,r;for(i=i.slice(0),i.sort(function(l,t){var n=l.x-t.x;return n!==0?n:l.y-t.y}),r=0;r<i.length;r+=1){for(f=i[r];a.length>=2&&o.cross3(a[a.length-2],a[a.length-1],f)<=0;)a.pop();a.push(f)}for(r=i.length-1;r>=0;r-=1){for(f=i[r];h.length>=2&&o.cross3(h[h.length-2],h[h.length-1],f)<=0;)h.pop();h.push(f)}return h.pop(),a.pop(),h.concat(a)}})()},function(T,R,p){var e={};T.exports=e;var o=p(0);(function(){e.on=function(s,i,h){for(var a=i.split(" "),f,r=0;r<a.length;r++)f=a[r],s.events=s.events||{},s.events[f]=s.events[f]||[],s.events[f].push(h);return h},e.off=function(s,i,h){if(!i){s.events={};return}typeof i=="function"&&(h=i,i=o.keys(s.events).join(" "));for(var a=i.split(" "),f=0;f<a.length;f++){var r=s.events[a[f]],l=[];if(h&&r)for(var t=0;t<r.length;t++)r[t]!==h&&l.push(r[t]);s.events[a[f]]=l}},e.trigger=function(s,i,h){var a,f,r,l,t=s.events;if(t&&o.keys(t).length>0){h||(h={}),a=i.split(" ");for(var n=0;n<a.length;n++)if(f=a[n],r=t[f],r){l=o.clone(h,!1),l.name=f,l.source=s;for(var v=0;v<r.length;v++)r[v].apply(s,[l])}}}})()},function(T,R,p){var e={};T.exports=e;var o=p(4),s=p(0),i=p(1),h=p(6);(function(){e.create=function(a){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},a)},e.setModified=function(a,f,r,l){if(a.isModified=f,f&&a.cache&&(a.cache.allBodies=null,a.cache.allConstraints=null,a.cache.allComposites=null),r&&a.parent&&e.setModified(a.parent,f,r,l),l)for(var t=0;t<a.composites.length;t++){var n=a.composites[t];e.setModified(n,f,r,l)}},e.add=function(a,f){var r=[].concat(f);o.trigger(a,"beforeAdd",{object:f});for(var l=0;l<r.length;l++){var t=r[l];switch(t.type){case"body":if(t.parent!==t){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(a,t);break;case"constraint":e.addConstraint(a,t);break;case"composite":e.addComposite(a,t);break;case"mouseConstraint":e.addConstraint(a,t.constraint);break}}return o.trigger(a,"afterAdd",{object:f}),a},e.remove=function(a,f,r){var l=[].concat(f);o.trigger(a,"beforeRemove",{object:f});for(var t=0;t<l.length;t++){var n=l[t];switch(n.type){case"body":e.removeBody(a,n,r);break;case"constraint":e.removeConstraint(a,n,r);break;case"composite":e.removeComposite(a,n,r);break;case"mouseConstraint":e.removeConstraint(a,n.constraint);break}}return o.trigger(a,"afterRemove",{object:f}),a},e.addComposite=function(a,f){return a.composites.push(f),f.parent=a,e.setModified(a,!0,!0,!1),a},e.removeComposite=function(a,f,r){var l=s.indexOf(a.composites,f);if(l!==-1&&e.removeCompositeAt(a,l),r)for(var t=0;t<a.composites.length;t++)e.removeComposite(a.composites[t],f,!0);return a},e.removeCompositeAt=function(a,f){return a.composites.splice(f,1),e.setModified(a,!0,!0,!1),a},e.addBody=function(a,f){return a.bodies.push(f),e.setModified(a,!0,!0,!1),a},e.removeBody=function(a,f,r){var l=s.indexOf(a.bodies,f);if(l!==-1&&e.removeBodyAt(a,l),r)for(var t=0;t<a.composites.length;t++)e.removeBody(a.composites[t],f,!0);return a},e.removeBodyAt=function(a,f){return a.bodies.splice(f,1),e.setModified(a,!0,!0,!1),a},e.addConstraint=function(a,f){return a.constraints.push(f),e.setModified(a,!0,!0,!1),a},e.removeConstraint=function(a,f,r){var l=s.indexOf(a.constraints,f);if(l!==-1&&e.removeConstraintAt(a,l),r)for(var t=0;t<a.composites.length;t++)e.removeConstraint(a.composites[t],f,!0);return a},e.removeConstraintAt=function(a,f){return a.constraints.splice(f,1),e.setModified(a,!0,!0,!1),a},e.clear=function(a,f,r){if(r)for(var l=0;l<a.composites.length;l++)e.clear(a.composites[l],f,!0);return f?a.bodies=a.bodies.filter(function(t){return t.isStatic}):a.bodies.length=0,a.constraints.length=0,a.composites.length=0,e.setModified(a,!0,!0,!1),a},e.allBodies=function(a){if(a.cache&&a.cache.allBodies)return a.cache.allBodies;for(var f=[].concat(a.bodies),r=0;r<a.composites.length;r++)f=f.concat(e.allBodies(a.composites[r]));return a.cache&&(a.cache.allBodies=f),f},e.allConstraints=function(a){if(a.cache&&a.cache.allConstraints)return a.cache.allConstraints;for(var f=[].concat(a.constraints),r=0;r<a.composites.length;r++)f=f.concat(e.allConstraints(a.composites[r]));return a.cache&&(a.cache.allConstraints=f),f},e.allComposites=function(a){if(a.cache&&a.cache.allComposites)return a.cache.allComposites;for(var f=[].concat(a.composites),r=0;r<a.composites.length;r++)f=f.concat(e.allComposites(a.composites[r]));return a.cache&&(a.cache.allComposites=f),f},e.get=function(a,f,r){var l,t;switch(r){case"body":l=e.allBodies(a);break;case"constraint":l=e.allConstraints(a);break;case"composite":l=e.allComposites(a).concat(a);break}return l?(t=l.filter(function(n){return n.id.toString()===f.toString()}),t.length===0?null:t[0]):null},e.move=function(a,f,r){return e.remove(a,f),e.add(r,f),a},e.rebase=function(a){for(var f=e.allBodies(a).concat(e.allConstraints(a)).concat(e.allComposites(a)),r=0;r<f.length;r++)f[r].id=s.nextId();return a},e.translate=function(a,f,r){for(var l=r?e.allBodies(a):a.bodies,t=0;t<l.length;t++)h.translate(l[t],f);return a},e.rotate=function(a,f,r,l){for(var t=Math.cos(f),n=Math.sin(f),v=l?e.allBodies(a):a.bodies,u=0;u<v.length;u++){var y=v[u],C=y.position.x-r.x,c=y.position.y-r.y;h.setPosition(y,{x:r.x+(C*t-c*n),y:r.y+(C*n+c*t)}),h.rotate(y,f)}return a},e.scale=function(a,f,r,l,t){for(var n=t?e.allBodies(a):a.bodies,v=0;v<n.length;v++){var u=n[v],y=u.position.x-l.x,C=u.position.y-l.y;h.setPosition(u,{x:l.x+y*f,y:l.y+C*r}),h.scale(u,f,r)}return a},e.bounds=function(a){for(var f=e.allBodies(a),r=[],l=0;l<f.length;l+=1){var t=f[l];r.push(t.bounds.min,t.bounds.max)}return i.create(r)}})()},function(T,R,p){var e={};T.exports=e;var o=p(3),s=p(2),i=p(7),h=p(16),a=p(0),f=p(1),r=p(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var n={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},v=a.extend(n,t);return l(v,t),v},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var l=function(t,n){n=n||{},e.set(t,{bounds:t.bounds||f.create(t.vertices),positionPrev:t.positionPrev||s.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),o.rotate(t.vertices,t.angle,t.position),r.rotate(t.axes,t.angle),f.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:n.axes||t.axes,area:n.area||t.area,mass:n.mass||t.mass,inertia:n.inertia||t.inertia});var v=t.isStatic?"#14151f":a.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),u=t.isStatic?"#555":"#ccc",y=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||v,t.render.strokeStyle=t.render.strokeStyle||u,t.render.lineWidth=t.render.lineWidth||y,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,n,v){var u;typeof n=="string"&&(u=n,n={},n[u]=v);for(u in n)if(!!Object.prototype.hasOwnProperty.call(n,u))switch(v=n[u],u){case"isStatic":e.setStatic(t,v);break;case"isSleeping":i.set(t,v);break;case"mass":e.setMass(t,v);break;case"density":e.setDensity(t,v);break;case"inertia":e.setInertia(t,v);break;case"vertices":e.setVertices(t,v);break;case"position":e.setPosition(t,v);break;case"angle":e.setAngle(t,v);break;case"velocity":e.setVelocity(t,v);break;case"angularVelocity":e.setAngularVelocity(t,v);break;case"parts":e.setParts(t,v);break;case"centre":e.setCentre(t,v);break;default:t[u]=v}},e.setStatic=function(t,n){for(var v=0;v<t.parts.length;v++){var u=t.parts[v];u.isStatic=n,n?(u._original={restitution:u.restitution,friction:u.friction,mass:u.mass,inertia:u.inertia,density:u.density,inverseMass:u.inverseMass,inverseInertia:u.inverseInertia},u.restitution=0,u.friction=1,u.mass=u.inertia=u.density=1/0,u.inverseMass=u.inverseInertia=0,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.anglePrev=u.angle,u.angularVelocity=0,u.speed=0,u.angularSpeed=0,u.motion=0):u._original&&(u.restitution=u._original.restitution,u.friction=u._original.friction,u.mass=u._original.mass,u.inertia=u._original.inertia,u.density=u._original.density,u.inverseMass=u._original.inverseMass,u.inverseInertia=u._original.inverseInertia,u._original=null)}},e.setMass=function(t,n){var v=t.inertia/(t.mass/6);t.inertia=v*(n/6),t.inverseInertia=1/t.inertia,t.mass=n,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,n){e.setMass(t,n*t.area),t.density=n},e.setInertia=function(t,n){t.inertia=n,t.inverseInertia=1/t.inertia},e.setVertices=function(t,n){n[0].body===t?t.vertices=n:t.vertices=o.create(n,t),t.axes=r.fromVertices(t.vertices),t.area=o.area(t.vertices),e.setMass(t,t.density*t.area);var v=o.centre(t.vertices);o.translate(t.vertices,v,-1),e.setInertia(t,e._inertiaScale*o.inertia(t.vertices,t.mass)),o.translate(t.vertices,t.position),f.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,n,v){var u;for(n=n.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,u=0;u<n.length;u++){var y=n[u];y!==t&&(y.parent=t,t.parts.push(y))}if(t.parts.length!==1){if(v=typeof v<"u"?v:!0,v){var C=[];for(u=0;u<n.length;u++)C=C.concat(n[u].vertices);o.clockwiseSort(C);var c=o.hull(C),g=o.centre(c);e.setVertices(t,c),o.translate(t.vertices,g)}var m=e._totalProperties(t);t.area=m.area,t.parent=t,t.position.x=m.centre.x,t.position.y=m.centre.y,t.positionPrev.x=m.centre.x,t.positionPrev.y=m.centre.y,e.setMass(t,m.mass),e.setInertia(t,m.inertia),e.setPosition(t,m.centre)}},e.setCentre=function(t,n,v){v?(t.positionPrev.x+=n.x,t.positionPrev.y+=n.y,t.position.x+=n.x,t.position.y+=n.y):(t.positionPrev.x=n.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=n.y-(t.position.y-t.positionPrev.y),t.position.x=n.x,t.position.y=n.y)},e.setPosition=function(t,n){var v=s.sub(n,t.position);t.positionPrev.x+=v.x,t.positionPrev.y+=v.y;for(var u=0;u<t.parts.length;u++){var y=t.parts[u];y.position.x+=v.x,y.position.y+=v.y,o.translate(y.vertices,v),f.update(y.bounds,y.vertices,t.velocity)}},e.setAngle=function(t,n){var v=n-t.angle;t.anglePrev+=v;for(var u=0;u<t.parts.length;u++){var y=t.parts[u];y.angle+=v,o.rotate(y.vertices,v,t.position),r.rotate(y.axes,v),f.update(y.bounds,y.vertices,t.velocity),u>0&&s.rotateAbout(y.position,v,t.position,y.position)}},e.setVelocity=function(t,n){t.positionPrev.x=t.position.x-n.x,t.positionPrev.y=t.position.y-n.y,t.velocity.x=n.x,t.velocity.y=n.y,t.speed=s.magnitude(t.velocity)},e.setAngularVelocity=function(t,n){t.anglePrev=t.angle-n,t.angularVelocity=n,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,n){e.setPosition(t,s.add(t.position,n))},e.rotate=function(t,n,v){if(!v)e.setAngle(t,t.angle+n);else{var u=Math.cos(n),y=Math.sin(n),C=t.position.x-v.x,c=t.position.y-v.y;e.setPosition(t,{x:v.x+(C*u-c*y),y:v.y+(C*y+c*u)}),e.setAngle(t,t.angle+n)}},e.scale=function(t,n,v,u){var y=0,C=0;u=u||t.position;for(var c=0;c<t.parts.length;c++){var g=t.parts[c];o.scale(g.vertices,n,v,u),g.axes=r.fromVertices(g.vertices),g.area=o.area(g.vertices),e.setMass(g,t.density*g.area),o.translate(g.vertices,{x:-g.position.x,y:-g.position.y}),e.setInertia(g,e._inertiaScale*o.inertia(g.vertices,g.mass)),o.translate(g.vertices,{x:g.position.x,y:g.position.y}),c>0&&(y+=g.area,C+=g.inertia),g.position.x=u.x+(g.position.x-u.x)*n,g.position.y=u.y+(g.position.y-u.y)*v,f.update(g.bounds,g.vertices,t.velocity)}t.parts.length>1&&(t.area=y,t.isStatic||(e.setMass(t,t.density*y),e.setInertia(t,C))),t.circleRadius&&(n===v?t.circleRadius*=n:t.circleRadius=null)},e.update=function(t,n,v,u){var y=Math.pow(n*v*t.timeScale,2),C=1-t.frictionAir*v*t.timeScale,c=t.position.x-t.positionPrev.x,g=t.position.y-t.positionPrev.y;t.velocity.x=c*C*u+t.force.x/t.mass*y,t.velocity.y=g*C*u+t.force.y/t.mass*y,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*C*u+t.torque/t.inertia*y,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=s.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var m=0;m<t.parts.length;m++){var x=t.parts[m];o.translate(x.vertices,t.velocity),m>0&&(x.position.x+=t.velocity.x,x.position.y+=t.velocity.y),t.angularVelocity!==0&&(o.rotate(x.vertices,t.angularVelocity,t.position),r.rotate(x.axes,t.angularVelocity),m>0&&s.rotateAbout(x.position,t.angularVelocity,t.position,x.position)),f.update(x.bounds,x.vertices,t.velocity)}},e.applyForce=function(t,n,v){t.force.x+=v.x,t.force.y+=v.y;var u={x:n.x-t.position.x,y:n.y-t.position.y};t.torque+=u.x*v.y-u.y*v.x},e._totalProperties=function(t){for(var n={mass:0,area:0,inertia:0,centre:{x:0,y:0}},v=t.parts.length===1?0:1;v<t.parts.length;v++){var u=t.parts[v],y=u.mass!==1/0?u.mass:1;n.mass+=y,n.area+=u.area,n.inertia+=u.inertia,n.centre=s.add(n.centre,s.mult(u.position,y))}return n.centre=s.div(n.centre,n.mass),n}})()},function(T,R,p){var e={};T.exports=e;var o=p(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(s,i){for(var h=i*i*i,a=0;a<s.length;a++){var f=s[a],r=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(f.force.x!==0||f.force.y!==0){e.set(f,!1);continue}var l=Math.min(f.motion,r),t=Math.max(f.motion,r);f.motion=e._minBias*l+(1-e._minBias)*t,f.sleepThreshold>0&&f.motion<e._motionSleepThreshold*h?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&e.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},e.afterCollisions=function(s,i){for(var h=i*i*i,a=0;a<s.length;a++){var f=s[a];if(!!f.isActive){var r=f.collision,l=r.bodyA.parent,t=r.bodyB.parent;if(!(l.isSleeping&&t.isSleeping||l.isStatic||t.isStatic)&&(l.isSleeping||t.isSleeping)){var n=l.isSleeping&&!l.isStatic?l:t,v=n===l?t:l;!n.isStatic&&v.motion>e._motionWakeThreshold*h&&e.set(n,!1)}}}},e.set=function(s,i){var h=s.isSleeping;i?(s.isSleeping=!0,s.sleepCounter=s.sleepThreshold,s.positionImpulse.x=0,s.positionImpulse.y=0,s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.anglePrev=s.angle,s.speed=0,s.angularSpeed=0,s.motion=0,h||o.trigger(s,"sleepStart")):(s.isSleeping=!1,s.sleepCounter=0,h&&o.trigger(s,"sleepEnd"))}})()},function(T,R,p){var e={};T.exports=e;var o=p(3),s=p(9);(function(){var i=[],h={overlap:0,axis:null},a={overlap:0,axis:null};e.create=function(f,r){return{pair:null,collided:!1,bodyA:f,bodyB:r,parentA:f.parent,parentB:r.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(f,r,l){if(e._overlapAxes(h,f.vertices,r.vertices,f.axes),h.overlap<=0||(e._overlapAxes(a,r.vertices,f.vertices,r.axes),a.overlap<=0))return null;var t=l&&l.table[s.id(f,r)],n;t?n=t.collision:(n=e.create(f,r),n.collided=!0,n.bodyA=f.id<r.id?f:r,n.bodyB=f.id<r.id?r:f,n.parentA=n.bodyA.parent,n.parentB=n.bodyB.parent),f=n.bodyA,r=n.bodyB;var v;h.overlap<a.overlap?v=h:v=a;var u=n.normal,y=n.supports,C=v.axis,c=C.x,g=C.y;c*(r.position.x-f.position.x)+g*(r.position.y-f.position.y)<0?(u.x=c,u.y=g):(u.x=-c,u.y=-g),n.tangent.x=-u.y,n.tangent.y=u.x,n.depth=v.overlap,n.penetration.x=u.x*n.depth,n.penetration.y=u.y*n.depth;var m=e._findSupports(f,r,u,1),x=0;if(o.contains(f.vertices,m[0])&&(y[x++]=m[0]),o.contains(f.vertices,m[1])&&(y[x++]=m[1]),x<2){var S=e._findSupports(r,f,u,-1);o.contains(r.vertices,S[0])&&(y[x++]=S[0]),x<2&&o.contains(r.vertices,S[1])&&(y[x++]=S[1])}return x===0&&(y[x++]=m[0]),y.length=x,n},e._overlapAxes=function(f,r,l,t){var n=r.length,v=l.length,u=r[0].x,y=r[0].y,C=l[0].x,c=l[0].y,g=t.length,m=Number.MAX_VALUE,x=0,S,w,d,M,P,I;for(P=0;P<g;P++){var A=t[P],E=A.x,B=A.y,L=u*E+y*B,V=C*E+c*B,F=L,D=V;for(I=1;I<n;I+=1)M=r[I].x*E+r[I].y*B,M>F?F=M:M<L&&(L=M);for(I=1;I<v;I+=1)M=l[I].x*E+l[I].y*B,M>D?D=M:M<V&&(V=M);if(w=F-V,d=D-L,S=w<d?w:d,S<m&&(m=S,x=P,S<=0))break}f.axis=t[x],f.overlap=m},e._projectToAxis=function(f,r,l){for(var t=r[0].x*l.x+r[0].y*l.y,n=t,v=1;v<r.length;v+=1){var u=r[v].x*l.x+r[v].y*l.y;u>n?n=u:u<t&&(t=u)}f.min=t,f.max=n},e._findSupports=function(f,r,l,t){var n=r.vertices,v=n.length,u=f.position.x,y=f.position.y,C=l.x*t,c=l.y*t,g=Number.MAX_VALUE,m,x,S,w,d;for(d=0;d<v;d+=1)x=n[d],w=C*(u-x.x)+c*(y-x.y),w<g&&(g=w,m=x);return S=n[(v+m.index-1)%v],g=C*(u-S.x)+c*(y-S.y),x=n[(m.index+1)%v],C*(u-x.x)+c*(y-x.y)<g?(i[0]=m,i[1]=x,i):(i[0]=m,i[1]=S,i)}})()},function(T,R,p){var e={};T.exports=e;var o=p(17);(function(){e.create=function(s,i){var h=s.bodyA,a=s.bodyB,f={id:e.id(h,a),bodyA:h,bodyB:a,collision:s,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:h.isSensor||a.isSensor,timeCreated:i,timeUpdated:i,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(f,s,i),f},e.update=function(s,i,h){var a=s.contacts,f=i.supports,r=s.activeContacts,l=i.parentA,t=i.parentB,n=l.vertices.length;s.isActive=!0,s.timeUpdated=h,s.collision=i,s.separation=i.depth,s.inverseMass=l.inverseMass+t.inverseMass,s.friction=l.friction<t.friction?l.friction:t.friction,s.frictionStatic=l.frictionStatic>t.frictionStatic?l.frictionStatic:t.frictionStatic,s.restitution=l.restitution>t.restitution?l.restitution:t.restitution,s.slop=l.slop>t.slop?l.slop:t.slop,i.pair=s,r.length=0;for(var v=0;v<f.length;v++){var u=f[v],y=u.body===l?u.index:n+u.index,C=a[y];C?r.push(C):r.push(a[y]=o.create(u))}},e.setActive=function(s,i,h){i?(s.isActive=!0,s.timeUpdated=h):(s.isActive=!1,s.activeContacts.length=0)},e.id=function(s,i){return s.id<i.id?"A"+s.id+"B"+i.id:"A"+i.id+"B"+s.id}})()},function(T,R,p){var e={};T.exports=e;var o=p(3),s=p(2),i=p(7),h=p(1),a=p(11),f=p(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(r){var l=r;l.bodyA&&!l.pointA&&(l.pointA={x:0,y:0}),l.bodyB&&!l.pointB&&(l.pointB={x:0,y:0});var t=l.bodyA?s.add(l.bodyA.position,l.pointA):l.pointA,n=l.bodyB?s.add(l.bodyB.position,l.pointB):l.pointB,v=s.magnitude(s.sub(t,n));l.length=typeof l.length<"u"?l.length:v,l.id=l.id||f.nextId(),l.label=l.label||"Constraint",l.type="constraint",l.stiffness=l.stiffness||(l.length>0?1:.7),l.damping=l.damping||0,l.angularStiffness=l.angularStiffness||0,l.angleA=l.bodyA?l.bodyA.angle:l.angleA,l.angleB=l.bodyB?l.bodyB.angle:l.angleB,l.plugin={};var u={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return l.length===0&&l.stiffness>.1?(u.type="pin",u.anchors=!1):l.stiffness<.9&&(u.type="spring"),l.render=f.extend(u,l.render),l},e.preSolveAll=function(r){for(var l=0;l<r.length;l+=1){var t=r[l],n=t.constraintImpulse;t.isStatic||n.x===0&&n.y===0&&n.angle===0||(t.position.x+=n.x,t.position.y+=n.y,t.angle+=n.angle)}},e.solveAll=function(r,l){for(var t=0;t<r.length;t+=1){var n=r[t],v=!n.bodyA||n.bodyA&&n.bodyA.isStatic,u=!n.bodyB||n.bodyB&&n.bodyB.isStatic;(v||u)&&e.solve(r[t],l)}for(t=0;t<r.length;t+=1)n=r[t],v=!n.bodyA||n.bodyA&&n.bodyA.isStatic,u=!n.bodyB||n.bodyB&&n.bodyB.isStatic,!v&&!u&&e.solve(r[t],l)},e.solve=function(r,l){var t=r.bodyA,n=r.bodyB,v=r.pointA,u=r.pointB;if(!(!t&&!n)){t&&!t.isStatic&&(s.rotate(v,t.angle-r.angleA,v),r.angleA=t.angle),n&&!n.isStatic&&(s.rotate(u,n.angle-r.angleB,u),r.angleB=n.angle);var y=v,C=u;if(t&&(y=s.add(t.position,v)),n&&(C=s.add(n.position,u)),!(!y||!C)){var c=s.sub(y,C),g=s.magnitude(c);g<e._minLength&&(g=e._minLength);var m=(g-r.length)/g,x=r.stiffness<1?r.stiffness*l:r.stiffness,S=s.mult(c,m*x),w=(t?t.inverseMass:0)+(n?n.inverseMass:0),d=(t?t.inverseInertia:0)+(n?n.inverseInertia:0),M=w+d,P,I,A,E,B;if(r.damping){var L=s.create();A=s.div(c,g),B=s.sub(n&&s.sub(n.position,n.positionPrev)||L,t&&s.sub(t.position,t.positionPrev)||L),E=s.dot(A,B)}t&&!t.isStatic&&(I=t.inverseMass/w,t.constraintImpulse.x-=S.x*I,t.constraintImpulse.y-=S.y*I,t.position.x-=S.x*I,t.position.y-=S.y*I,r.damping&&(t.positionPrev.x-=r.damping*A.x*E*I,t.positionPrev.y-=r.damping*A.y*E*I),P=s.cross(v,S)/M*e._torqueDampen*t.inverseInertia*(1-r.angularStiffness),t.constraintImpulse.angle-=P,t.angle-=P),n&&!n.isStatic&&(I=n.inverseMass/w,n.constraintImpulse.x+=S.x*I,n.constraintImpulse.y+=S.y*I,n.position.x+=S.x*I,n.position.y+=S.y*I,r.damping&&(n.positionPrev.x+=r.damping*A.x*E*I,n.positionPrev.y+=r.damping*A.y*E*I),P=s.cross(u,S)/M*e._torqueDampen*n.inverseInertia*(1-r.angularStiffness),n.constraintImpulse.angle+=P,n.angle+=P)}}},e.postSolveAll=function(r){for(var l=0;l<r.length;l++){var t=r[l],n=t.constraintImpulse;if(!(t.isStatic||n.x===0&&n.y===0&&n.angle===0)){i.set(t,!1);for(var v=0;v<t.parts.length;v++){var u=t.parts[v];o.translate(u.vertices,n),v>0&&(u.position.x+=n.x,u.position.y+=n.y),n.angle!==0&&(o.rotate(u.vertices,n.angle,t.position),a.rotate(u.axes,n.angle),v>0&&s.rotateAbout(u.position,n.angle,t.position,u.position)),h.update(u.bounds,u.vertices,t.velocity)}n.angle*=e._warming,n.x*=e._warming,n.y*=e._warming}}},e.pointAWorld=function(r){return{x:(r.bodyA?r.bodyA.position.x:0)+r.pointA.x,y:(r.bodyA?r.bodyA.position.y:0)+r.pointA.y}},e.pointBWorld=function(r){return{x:(r.bodyB?r.bodyB.position.x:0)+r.pointB.x,y:(r.bodyB?r.bodyB.position.y:0)+r.pointB.y}}})()},function(T,R,p){var e={};T.exports=e;var o=p(2),s=p(0);(function(){e.fromVertices=function(i){for(var h={},a=0;a<i.length;a++){var f=(a+1)%i.length,r=o.normalise({x:i[f].y-i[a].y,y:i[a].x-i[f].x}),l=r.y===0?1/0:r.x/r.y;l=l.toFixed(3).toString(),h[l]=r}return s.values(h)},e.rotate=function(i,h){if(h!==0)for(var a=Math.cos(h),f=Math.sin(h),r=0;r<i.length;r++){var l=i[r],t;t=l.x*a-l.y*f,l.y=l.x*f+l.y*a,l.x=t}}})()},function(T,R,p){var e={};T.exports=e;var o=p(3),s=p(0),i=p(6),h=p(1),a=p(2);(function(){e.rectangle=function(f,r,l,t,n){n=n||{};var v={label:"Rectangle Body",position:{x:f,y:r},vertices:o.fromPath("L 0 0 L "+l+" 0 L "+l+" "+t+" L 0 "+t)};if(n.chamfer){var u=n.chamfer;v.vertices=o.chamfer(v.vertices,u.radius,u.quality,u.qualityMin,u.qualityMax),delete n.chamfer}return i.create(s.extend({},v,n))},e.trapezoid=function(f,r,l,t,n,v){v=v||{},n*=.5;var u=(1-n*2)*l,y=l*n,C=y+u,c=C+y,g;n<.5?g="L 0 0 L "+y+" "+-t+" L "+C+" "+-t+" L "+c+" 0":g="L 0 0 L "+C+" "+-t+" L "+c+" 0";var m={label:"Trapezoid Body",position:{x:f,y:r},vertices:o.fromPath(g)};if(v.chamfer){var x=v.chamfer;m.vertices=o.chamfer(m.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete v.chamfer}return i.create(s.extend({},m,v))},e.circle=function(f,r,l,t,n){t=t||{};var v={label:"Circle Body",circleRadius:l};n=n||25;var u=Math.ceil(Math.max(10,Math.min(n,l)));return u%2===1&&(u+=1),e.polygon(f,r,u,l,s.extend({},v,t))},e.polygon=function(f,r,l,t,n){if(n=n||{},l<3)return e.circle(f,r,t,n);for(var v=2*Math.PI/l,u="",y=v*.5,C=0;C<l;C+=1){var c=y+C*v,g=Math.cos(c)*t,m=Math.sin(c)*t;u+="L "+g.toFixed(3)+" "+m.toFixed(3)+" "}var x={label:"Polygon Body",position:{x:f,y:r},vertices:o.fromPath(u)};if(n.chamfer){var S=n.chamfer;x.vertices=o.chamfer(x.vertices,S.radius,S.quality,S.qualityMin,S.qualityMax),delete n.chamfer}return i.create(s.extend({},x,n))},e.fromVertices=function(f,r,l,t,n,v,u,y){var C=s.getDecomp(),c,g,m,x,S,w,d,M,P,I,A;for(c=Boolean(C&&C.quickDecomp),t=t||{},m=[],n=typeof n<"u"?n:!1,v=typeof v<"u"?v:.01,u=typeof u<"u"?u:10,y=typeof y<"u"?y:.01,s.isArray(l[0])||(l=[l]),I=0;I<l.length;I+=1)if(w=l[I],x=o.isConvex(w),S=!x,S&&!c&&s.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),x||!c)x?w=o.clockwiseSort(w):w=o.hull(w),m.push({position:{x:f,y:r},vertices:w});else{var E=w.map(function(G){return[G.x,G.y]});C.makeCCW(E),v!==!1&&C.removeCollinearPoints(E,v),y!==!1&&C.removeDuplicatePoints&&C.removeDuplicatePoints(E,y);var B=C.quickDecomp(E);for(d=0;d<B.length;d++){var L=B[d],V=L.map(function(G){return{x:G[0],y:G[1]}});u>0&&o.area(V)<u||m.push({position:o.centre(V),vertices:V})}}for(d=0;d<m.length;d++)m[d]=i.create(s.extend(m[d],t));if(n){var F=5;for(d=0;d<m.length;d++){var D=m[d];for(M=d+1;M<m.length;M++){var O=m[M];if(h.overlaps(D.bounds,O.bounds)){var k=D.vertices,H=O.vertices;for(P=0;P<D.vertices.length;P++)for(A=0;A<O.vertices.length;A++){var z=a.magnitudeSquared(a.sub(k[(P+1)%k.length],H[A])),N=a.magnitudeSquared(a.sub(k[P],H[(A+1)%H.length]));z<F&&N<F&&(k[P].isInternal=!0,H[A].isInternal=!0)}}}}}return m.length>1?(g=i.create(s.extend({parts:m.slice(0)},t)),i.setPosition(g,{x:f,y:r}),g):m[0]}})()},function(T,R,p){var e={};T.exports=e;var o=p(0);(function(){e.create=function(s){var i={};return s||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),i.element=s||document.body,i.absolute={x:0,y:0},i.position={x:0,y:0},i.mousedownPosition={x:0,y:0},i.mouseupPosition={x:0,y:0},i.offset={x:0,y:0},i.scale={x:1,y:1},i.wheelDelta=0,i.button=-1,i.pixelRatio=parseInt(i.element.getAttribute("data-pixel-ratio"),10)||1,i.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},i.mousemove=function(h){var a=e._getRelativeMousePosition(h,i.element,i.pixelRatio),f=h.changedTouches;f&&(i.button=0,h.preventDefault()),i.absolute.x=a.x,i.absolute.y=a.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.sourceEvents.mousemove=h},i.mousedown=function(h){var a=e._getRelativeMousePosition(h,i.element,i.pixelRatio),f=h.changedTouches;f?(i.button=0,h.preventDefault()):i.button=h.button,i.absolute.x=a.x,i.absolute.y=a.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mousedownPosition.x=i.position.x,i.mousedownPosition.y=i.position.y,i.sourceEvents.mousedown=h},i.mouseup=function(h){var a=e._getRelativeMousePosition(h,i.element,i.pixelRatio),f=h.changedTouches;f&&h.preventDefault(),i.button=-1,i.absolute.x=a.x,i.absolute.y=a.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mouseupPosition.x=i.position.x,i.mouseupPosition.y=i.position.y,i.sourceEvents.mouseup=h},i.mousewheel=function(h){i.wheelDelta=Math.max(-1,Math.min(1,h.wheelDelta||-h.detail)),h.preventDefault()},e.setElement(i,i.element),i},e.setElement=function(s,i){s.element=i,i.addEventListener("mousemove",s.mousemove),i.addEventListener("mousedown",s.mousedown),i.addEventListener("mouseup",s.mouseup),i.addEventListener("mousewheel",s.mousewheel),i.addEventListener("DOMMouseScroll",s.mousewheel),i.addEventListener("touchmove",s.mousemove),i.addEventListener("touchstart",s.mousedown),i.addEventListener("touchend",s.mouseup)},e.clearSourceEvents=function(s){s.sourceEvents.mousemove=null,s.sourceEvents.mousedown=null,s.sourceEvents.mouseup=null,s.sourceEvents.mousewheel=null,s.wheelDelta=0},e.setOffset=function(s,i){s.offset.x=i.x,s.offset.y=i.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y},e.setScale=function(s,i){s.scale.x=i.x,s.scale.y=i.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y},e._getRelativeMousePosition=function(s,i,h){var a=i.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,r=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,l=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,t=s.changedTouches,n,v;return t?(n=t[0].pageX-a.left-r,v=t[0].pageY-a.top-l):(n=s.pageX-a.left-r,v=s.pageY-a.top-l),{x:n/(i.clientWidth/(i.width||i.clientWidth)*h),y:v/(i.clientHeight/(i.height||i.clientHeight)*h)}}})()},function(T,R,p){var e={};T.exports=e;var o=p(0),s=p(8);(function(){e.create=function(i){var h={bodies:[],pairs:null};return o.extend(h,i)},e.setBodies=function(i,h){i.bodies=h.slice(0)},e.clear=function(i){i.bodies=[]},e.collisions=function(i){var h=[],a=i.pairs,f=i.bodies,r=f.length,l=e.canCollide,t=s.collides,n,v;for(f.sort(e._compareBoundsX),n=0;n<r;n++){var u=f[n],y=u.bounds,C=u.bounds.max.x,c=u.bounds.max.y,g=u.bounds.min.y,m=u.isStatic||u.isSleeping,x=u.parts.length,S=x===1;for(v=n+1;v<r;v++){var w=f[v],d=w.bounds;if(d.min.x>C)break;if(!(c<d.min.y||g>d.max.y)&&!(m&&(w.isStatic||w.isSleeping))&&!!l(u.collisionFilter,w.collisionFilter)){var M=w.parts.length;if(S&&M===1){var P=t(u,w,a);P&&h.push(P)}else for(var I=x>1?1:0,A=M>1?1:0,E=I;E<x;E++)for(var B=u.parts[E],y=B.bounds,L=A;L<M;L++){var V=w.parts[L],d=V.bounds;if(!(y.min.x>d.max.x||y.max.x<d.min.x||y.max.y<d.min.y||y.min.y>d.max.y)){var P=t(B,V,a);P&&h.push(P)}}}}}return h},e.canCollide=function(i,h){return i.group===h.group&&i.group!==0?i.group>0:(i.mask&h.category)!==0&&(h.mask&i.category)!==0},e._compareBoundsX=function(i,h){return i.bounds.min.x-h.bounds.min.x}})()},function(T,R,p){var e={};T.exports=e;var o=p(0);(function(){e._registry={},e.register=function(s){if(e.isPlugin(s)||o.warn("Plugin.register:",e.toString(s),"does not implement all required fields."),s.name in e._registry){var i=e._registry[s.name],h=e.versionParse(s.version).number,a=e.versionParse(i.version).number;h>a?(o.warn("Plugin.register:",e.toString(i),"was upgraded to",e.toString(s)),e._registry[s.name]=s):h<a?o.warn("Plugin.register:",e.toString(i),"can not be downgraded to",e.toString(s)):s!==i&&o.warn("Plugin.register:",e.toString(s),"is already registered to different plugin object")}else e._registry[s.name]=s;return s},e.resolve=function(s){return e._registry[e.dependencyParse(s).name]},e.toString=function(s){return typeof s=="string"?s:(s.name||"anonymous")+"@"+(s.version||s.range||"0.0.0")},e.isPlugin=function(s){return s&&s.name&&s.version&&s.install},e.isUsed=function(s,i){return s.used.indexOf(i)>-1},e.isFor=function(s,i){var h=s.for&&e.dependencyParse(s.for);return!s.for||i.name===h.name&&e.versionSatisfies(i.version,h.range)},e.use=function(s,i){if(s.uses=(s.uses||[]).concat(i||[]),s.uses.length===0){o.warn("Plugin.use:",e.toString(s),"does not specify any dependencies to install.");return}for(var h=e.dependencies(s),a=o.topologicalSort(h),f=[],r=0;r<a.length;r+=1)if(a[r]!==s.name){var l=e.resolve(a[r]);if(!l){f.push("\u274C "+a[r]);continue}e.isUsed(s,l.name)||(e.isFor(l,s)||(o.warn("Plugin.use:",e.toString(l),"is for",l.for,"but installed on",e.toString(s)+"."),l._warned=!0),l.install?l.install(s):(o.warn("Plugin.use:",e.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(f.push("\u{1F536} "+e.toString(l)),delete l._warned):f.push("\u2705 "+e.toString(l)),s.used.push(l.name))}f.length>0&&o.info(f.join("  "))},e.dependencies=function(s,i){var h=e.dependencyParse(s),a=h.name;if(i=i||{},!(a in i)){s=e.resolve(s)||s,i[a]=o.map(s.uses||[],function(r){e.isPlugin(r)&&e.register(r);var l=e.dependencyParse(r),t=e.resolve(r);return t&&!e.versionSatisfies(t.version,l.range)?(o.warn("Plugin.dependencies:",e.toString(t),"does not satisfy",e.toString(l),"used by",e.toString(h)+"."),t._warned=!0,s._warned=!0):t||(o.warn("Plugin.dependencies:",e.toString(r),"used by",e.toString(h),"could not be resolved."),s._warned=!0),l.name});for(var f=0;f<i[a].length;f+=1)e.dependencies(i[a][f],i);return i}},e.dependencyParse=function(s){if(o.isString(s)){var i=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return i.test(s)||o.warn("Plugin.dependencyParse:",s,"is not a valid dependency string."),{name:s.split("@")[0],range:s.split("@")[1]||"*"}}return{name:s.name,range:s.range||s.version}},e.versionParse=function(s){var i=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;i.test(s)||o.warn("Plugin.versionParse:",s,"is not a valid version or range.");var h=i.exec(s),a=Number(h[4]),f=Number(h[5]),r=Number(h[6]);return{isRange:Boolean(h[1]||h[2]),version:h[3],range:s,operator:h[1]||h[2]||"",major:a,minor:f,patch:r,parts:[a,f,r],prerelease:h[7],number:a*1e8+f*1e4+r}},e.versionSatisfies=function(s,i){i=i||"*";var h=e.versionParse(i),a=e.versionParse(s);if(h.isRange){if(h.operator==="*"||s==="*")return!0;if(h.operator===">")return a.number>h.number;if(h.operator===">=")return a.number>=h.number;if(h.operator==="~")return a.major===h.major&&a.minor===h.minor&&a.patch>=h.patch;if(h.operator==="^")return h.major>0?a.major===h.major&&a.number>=h.number:h.minor>0?a.minor===h.minor&&a.patch>=h.patch:a.patch===h.patch}return s===i||s==="*"}})()},function(T,R,p){var e={};T.exports=e;var o=p(0),s=p(5),i=p(1),h=p(4),a=p(2),f=p(13);(function(){var r,l;typeof window<"u"&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(c){window.setTimeout(function(){c(o.now())},1e3/60)},l=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(c){var g={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!c.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},m=o.extend(g,c);return m.canvas&&(m.canvas.width=m.options.width||m.canvas.width,m.canvas.height=m.options.height||m.canvas.height),m.mouse=c.mouse,m.engine=c.engine,m.canvas=m.canvas||v(m.options.width,m.options.height),m.context=m.canvas.getContext("2d"),m.textures={},m.bounds=m.bounds||{min:{x:0,y:0},max:{x:m.canvas.width,y:m.canvas.height}},m.options.showBroadphase=!1,m.options.pixelRatio!==1&&e.setPixelRatio(m,m.options.pixelRatio),o.isElement(m.element)?m.element.appendChild(m.canvas):m.canvas.parentNode||o.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),m},e.run=function(c){(function g(m){c.frameRequestId=r(g),t(c,m),e.world(c,m),(c.options.showStats||c.options.showDebug)&&e.stats(c,c.context,m),(c.options.showPerformance||c.options.showDebug)&&e.performance(c,c.context,m)})()},e.stop=function(c){l(c.frameRequestId)},e.setPixelRatio=function(c,g){var m=c.options,x=c.canvas;g==="auto"&&(g=u(x)),m.pixelRatio=g,x.setAttribute("data-pixel-ratio",g),x.width=m.width*g,x.height=m.height*g,x.style.width=m.width+"px",x.style.height=m.height+"px"},e.lookAt=function(c,g,m,x){x=typeof x<"u"?x:!0,g=o.isArray(g)?g:[g],m=m||{x:0,y:0};for(var S={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},w=0;w<g.length;w+=1){var d=g[w],M=d.bounds?d.bounds.min:d.min||d.position||d,P=d.bounds?d.bounds.max:d.max||d.position||d;M&&P&&(M.x<S.min.x&&(S.min.x=M.x),P.x>S.max.x&&(S.max.x=P.x),M.y<S.min.y&&(S.min.y=M.y),P.y>S.max.y&&(S.max.y=P.y))}var I=S.max.x-S.min.x+2*m.x,A=S.max.y-S.min.y+2*m.y,E=c.canvas.height,B=c.canvas.width,L=B/E,V=I/A,F=1,D=1;V>L?D=V/L:F=L/V,c.options.hasBounds=!0,c.bounds.min.x=S.min.x,c.bounds.max.x=S.min.x+I*F,c.bounds.min.y=S.min.y,c.bounds.max.y=S.min.y+A*D,x&&(c.bounds.min.x+=I*.5-I*F*.5,c.bounds.max.x+=I*.5-I*F*.5,c.bounds.min.y+=A*.5-A*D*.5,c.bounds.max.y+=A*.5-A*D*.5),c.bounds.min.x-=m.x,c.bounds.max.x-=m.x,c.bounds.min.y-=m.y,c.bounds.max.y-=m.y,c.mouse&&(f.setScale(c.mouse,{x:(c.bounds.max.x-c.bounds.min.x)/c.canvas.width,y:(c.bounds.max.y-c.bounds.min.y)/c.canvas.height}),f.setOffset(c.mouse,c.bounds.min))},e.startViewTransform=function(c){var g=c.bounds.max.x-c.bounds.min.x,m=c.bounds.max.y-c.bounds.min.y,x=g/c.options.width,S=m/c.options.height;c.context.setTransform(c.options.pixelRatio/x,0,0,c.options.pixelRatio/S,0,0),c.context.translate(-c.bounds.min.x,-c.bounds.min.y)},e.endViewTransform=function(c){c.context.setTransform(c.options.pixelRatio,0,0,c.options.pixelRatio,0,0)},e.world=function(c,g){var m=o.now(),x=c.engine,S=x.world,w=c.canvas,d=c.context,M=c.options,P=c.timing,I=s.allBodies(S),A=s.allConstraints(S),E=M.wireframes?M.wireframeBackground:M.background,B=[],L=[],V,F={timestamp:x.timing.timestamp};if(h.trigger(c,"beforeRender",F),c.currentBackground!==E&&C(c,E),d.globalCompositeOperation="source-in",d.fillStyle="transparent",d.fillRect(0,0,w.width,w.height),d.globalCompositeOperation="source-over",M.hasBounds){for(V=0;V<I.length;V++){var D=I[V];i.overlaps(D.bounds,c.bounds)&&B.push(D)}for(V=0;V<A.length;V++){var O=A[V],k=O.bodyA,H=O.bodyB,z=O.pointA,N=O.pointB;k&&(z=a.add(k.position,O.pointA)),H&&(N=a.add(H.position,O.pointB)),!(!z||!N)&&(i.contains(c.bounds,z)||i.contains(c.bounds,N))&&L.push(O)}e.startViewTransform(c),c.mouse&&(f.setScale(c.mouse,{x:(c.bounds.max.x-c.bounds.min.x)/c.options.width,y:(c.bounds.max.y-c.bounds.min.y)/c.options.height}),f.setOffset(c.mouse,c.bounds.min))}else L=A,B=I,c.options.pixelRatio!==1&&c.context.setTransform(c.options.pixelRatio,0,0,c.options.pixelRatio,0,0);!M.wireframes||x.enableSleeping&&M.showSleeping?e.bodies(c,B,d):(M.showConvexHulls&&e.bodyConvexHulls(c,B,d),e.bodyWireframes(c,B,d)),M.showBounds&&e.bodyBounds(c,B,d),(M.showAxes||M.showAngleIndicator)&&e.bodyAxes(c,B,d),M.showPositions&&e.bodyPositions(c,B,d),M.showVelocity&&e.bodyVelocity(c,B,d),M.showIds&&e.bodyIds(c,B,d),M.showSeparations&&e.separations(c,x.pairs.list,d),M.showCollisions&&e.collisions(c,x.pairs.list,d),M.showVertexNumbers&&e.vertexNumbers(c,B,d),M.showMousePosition&&e.mousePosition(c,c.mouse,d),e.constraints(L,d),M.hasBounds&&e.endViewTransform(c),h.trigger(c,"afterRender",F),P.lastElapsed=o.now()-m},e.stats=function(c,g,m){for(var x=c.engine,S=x.world,w=s.allBodies(S),d=0,M=55,P=44,I=0,A=0,E=0;E<w.length;E+=1)d+=w[E].parts.length;var B={Part:d,Body:w.length,Cons:s.allConstraints(S).length,Comp:s.allComposites(S).length,Pair:x.pairs.list.length};g.fillStyle="#0e0f19",g.fillRect(I,A,M*5.5,P),g.font="12px Arial",g.textBaseline="top",g.textAlign="right";for(var L in B){var V=B[L];g.fillStyle="#aaa",g.fillText(L,I+M,A+8),g.fillStyle="#eee",g.fillText(V,I+M,A+26),I+=M}},e.performance=function(c,g){var m=c.engine,x=c.timing,S=x.deltaHistory,w=x.elapsedHistory,d=x.timestampElapsedHistory,M=x.engineDeltaHistory,P=x.engineElapsedHistory,I=m.timing.lastDelta,A=n(S),E=n(w),B=n(M),L=n(P),V=n(d),F=V/A||0,D=1e3/A||0,O=4,k=12,H=60,z=34,N=10,G=69;g.fillStyle="#0e0f19",g.fillRect(0,50,k*4+H*5+22,z),e.status(g,N,G,H,O,S.length,Math.round(D)+" fps",D/e._goodFps,function(U){return S[U]/A-1}),e.status(g,N+k+H,G,H,O,M.length,I.toFixed(2)+" dt",e._goodDelta/I,function(U){return M[U]/B-1}),e.status(g,N+(k+H)*2,G,H,O,P.length,L.toFixed(2)+" ut",1-L/e._goodFps,function(U){return P[U]/L-1}),e.status(g,N+(k+H)*3,G,H,O,w.length,E.toFixed(2)+" rt",1-E/e._goodFps,function(U){return w[U]/E-1}),e.status(g,N+(k+H)*4,G,H,O,d.length,F.toFixed(2)+" x",F*F*F,function(U){return(d[U]/S[U]/F||0)-1})},e.status=function(c,g,m,x,S,w,d,M,P){c.strokeStyle="#888",c.fillStyle="#444",c.lineWidth=1,c.fillRect(g,m+7,x,1),c.beginPath(),c.moveTo(g,m+7-S*o.clamp(.4*P(0),-2,2));for(var I=0;I<x;I+=1)c.lineTo(g+I,m+7-(I<w?S*o.clamp(.4*P(I),-2,2):0));c.stroke(),c.fillStyle="hsl("+o.clamp(25+95*M,0,120)+",100%,60%)",c.fillRect(g,m-7,4,4),c.font="12px Arial",c.textBaseline="middle",c.textAlign="right",c.fillStyle="#eee",c.fillText(d,g+x,m-5)},e.constraints=function(c,g){for(var m=g,x=0;x<c.length;x++){var S=c[x];if(!(!S.render.visible||!S.pointA||!S.pointB)){var w=S.bodyA,d=S.bodyB,M,P;if(w?M=a.add(w.position,S.pointA):M=S.pointA,S.render.type==="pin")m.beginPath(),m.arc(M.x,M.y,3,0,2*Math.PI),m.closePath();else{if(d?P=a.add(d.position,S.pointB):P=S.pointB,m.beginPath(),m.moveTo(M.x,M.y),S.render.type==="spring")for(var I=a.sub(P,M),A=a.perp(a.normalise(I)),E=Math.ceil(o.clamp(S.length/5,12,20)),B,L=1;L<E;L+=1)B=L%2===0?1:-1,m.lineTo(M.x+I.x*(L/E)+A.x*B*4,M.y+I.y*(L/E)+A.y*B*4);m.lineTo(P.x,P.y)}S.render.lineWidth&&(m.lineWidth=S.render.lineWidth,m.strokeStyle=S.render.strokeStyle,m.stroke()),S.render.anchors&&(m.fillStyle=S.render.strokeStyle,m.beginPath(),m.arc(M.x,M.y,3,0,2*Math.PI),m.arc(P.x,P.y,3,0,2*Math.PI),m.closePath(),m.fill())}}},e.bodies=function(c,g,m){var x=m,S=c.engine,w=c.options,d=w.showInternalEdges||!w.wireframes,M,P,I,A;for(I=0;I<g.length;I++)if(M=g[I],!!M.render.visible){for(A=M.parts.length>1?1:0;A<M.parts.length;A++)if(P=M.parts[A],!!P.render.visible){if(w.showSleeping&&M.isSleeping?x.globalAlpha=.5*P.render.opacity:P.render.opacity!==1&&(x.globalAlpha=P.render.opacity),P.render.sprite&&P.render.sprite.texture&&!w.wireframes){var E=P.render.sprite,B=y(c,E.texture);x.translate(P.position.x,P.position.y),x.rotate(P.angle),x.drawImage(B,B.width*-E.xOffset*E.xScale,B.height*-E.yOffset*E.yScale,B.width*E.xScale,B.height*E.yScale),x.rotate(-P.angle),x.translate(-P.position.x,-P.position.y)}else{if(P.circleRadius)x.beginPath(),x.arc(P.position.x,P.position.y,P.circleRadius,0,2*Math.PI);else{x.beginPath(),x.moveTo(P.vertices[0].x,P.vertices[0].y);for(var L=1;L<P.vertices.length;L++)!P.vertices[L-1].isInternal||d?x.lineTo(P.vertices[L].x,P.vertices[L].y):x.moveTo(P.vertices[L].x,P.vertices[L].y),P.vertices[L].isInternal&&!d&&x.moveTo(P.vertices[(L+1)%P.vertices.length].x,P.vertices[(L+1)%P.vertices.length].y);x.lineTo(P.vertices[0].x,P.vertices[0].y),x.closePath()}w.wireframes?(x.lineWidth=1,x.strokeStyle="#bbb",x.stroke()):(x.fillStyle=P.render.fillStyle,P.render.lineWidth&&(x.lineWidth=P.render.lineWidth,x.strokeStyle=P.render.strokeStyle,x.stroke()),x.fill())}x.globalAlpha=1}}},e.bodyWireframes=function(c,g,m){var x=m,S=c.options.showInternalEdges,w,d,M,P,I;for(x.beginPath(),M=0;M<g.length;M++)if(w=g[M],!!w.render.visible)for(I=w.parts.length>1?1:0;I<w.parts.length;I++){for(d=w.parts[I],x.moveTo(d.vertices[0].x,d.vertices[0].y),P=1;P<d.vertices.length;P++)!d.vertices[P-1].isInternal||S?x.lineTo(d.vertices[P].x,d.vertices[P].y):x.moveTo(d.vertices[P].x,d.vertices[P].y),d.vertices[P].isInternal&&!S&&x.moveTo(d.vertices[(P+1)%d.vertices.length].x,d.vertices[(P+1)%d.vertices.length].y);x.lineTo(d.vertices[0].x,d.vertices[0].y)}x.lineWidth=1,x.strokeStyle="#bbb",x.stroke()},e.bodyConvexHulls=function(c,g,m){var x=m,S,w,d,M,P;for(x.beginPath(),d=0;d<g.length;d++)if(S=g[d],!(!S.render.visible||S.parts.length===1)){for(x.moveTo(S.vertices[0].x,S.vertices[0].y),M=1;M<S.vertices.length;M++)x.lineTo(S.vertices[M].x,S.vertices[M].y);x.lineTo(S.vertices[0].x,S.vertices[0].y)}x.lineWidth=1,x.strokeStyle="rgba(255,255,255,0.2)",x.stroke()},e.vertexNumbers=function(c,g,m){var x=m,S,w,d;for(S=0;S<g.length;S++){var M=g[S].parts;for(d=M.length>1?1:0;d<M.length;d++){var P=M[d];for(w=0;w<P.vertices.length;w++)x.fillStyle="rgba(255,255,255,0.2)",x.fillText(S+"_"+w,P.position.x+(P.vertices[w].x-P.position.x)*.8,P.position.y+(P.vertices[w].y-P.position.y)*.8)}}},e.mousePosition=function(c,g,m){var x=m;x.fillStyle="rgba(255,255,255,0.8)",x.fillText(g.position.x+"  "+g.position.y,g.position.x+5,g.position.y-5)},e.bodyBounds=function(c,g,m){var x=m,S=c.engine,w=c.options;x.beginPath();for(var d=0;d<g.length;d++){var M=g[d];if(M.render.visible)for(var P=g[d].parts,I=P.length>1?1:0;I<P.length;I++){var A=P[I];x.rect(A.bounds.min.x,A.bounds.min.y,A.bounds.max.x-A.bounds.min.x,A.bounds.max.y-A.bounds.min.y)}}w.wireframes?x.strokeStyle="rgba(255,255,255,0.08)":x.strokeStyle="rgba(0,0,0,0.1)",x.lineWidth=1,x.stroke()},e.bodyAxes=function(c,g,m){var x=m,S=c.engine,w=c.options,d,M,P,I;for(x.beginPath(),M=0;M<g.length;M++){var A=g[M],E=A.parts;if(!!A.render.visible)if(w.showAxes)for(P=E.length>1?1:0;P<E.length;P++)for(d=E[P],I=0;I<d.axes.length;I++){var B=d.axes[I];x.moveTo(d.position.x,d.position.y),x.lineTo(d.position.x+B.x*20,d.position.y+B.y*20)}else for(P=E.length>1?1:0;P<E.length;P++)for(d=E[P],I=0;I<d.axes.length;I++)x.moveTo(d.position.x,d.position.y),x.lineTo((d.vertices[0].x+d.vertices[d.vertices.length-1].x)/2,(d.vertices[0].y+d.vertices[d.vertices.length-1].y)/2)}w.wireframes?(x.strokeStyle="indianred",x.lineWidth=1):(x.strokeStyle="rgba(255, 255, 255, 0.4)",x.globalCompositeOperation="overlay",x.lineWidth=2),x.stroke(),x.globalCompositeOperation="source-over"},e.bodyPositions=function(c,g,m){var x=m,S=c.engine,w=c.options,d,M,P,I;for(x.beginPath(),P=0;P<g.length;P++)if(d=g[P],!!d.render.visible)for(I=0;I<d.parts.length;I++)M=d.parts[I],x.arc(M.position.x,M.position.y,3,0,2*Math.PI,!1),x.closePath();for(w.wireframes?x.fillStyle="indianred":x.fillStyle="rgba(0,0,0,0.5)",x.fill(),x.beginPath(),P=0;P<g.length;P++)d=g[P],d.render.visible&&(x.arc(d.positionPrev.x,d.positionPrev.y,2,0,2*Math.PI,!1),x.closePath());x.fillStyle="rgba(255,165,0,0.8)",x.fill()},e.bodyVelocity=function(c,g,m){var x=m;x.beginPath();for(var S=0;S<g.length;S++){var w=g[S];!w.render.visible||(x.moveTo(w.position.x,w.position.y),x.lineTo(w.position.x+(w.position.x-w.positionPrev.x)*2,w.position.y+(w.position.y-w.positionPrev.y)*2))}x.lineWidth=3,x.strokeStyle="cornflowerblue",x.stroke()},e.bodyIds=function(c,g,m){var x=m,S,w;for(S=0;S<g.length;S++)if(!!g[S].render.visible){var d=g[S].parts;for(w=d.length>1?1:0;w<d.length;w++){var M=d[w];x.font="12px Arial",x.fillStyle="rgba(255,255,255,0.5)",x.fillText(M.id,M.position.x+10,M.position.y-10)}}},e.collisions=function(c,g,m){var x=m,S=c.options,w,d,M,P,I,A,E;for(x.beginPath(),A=0;A<g.length;A++)if(w=g[A],!!w.isActive)for(d=w.collision,E=0;E<w.activeContacts.length;E++){var B=w.activeContacts[E],L=B.vertex;x.rect(L.x-1.5,L.y-1.5,3.5,3.5)}for(S.wireframes?x.fillStyle="rgba(255,255,255,0.7)":x.fillStyle="orange",x.fill(),x.beginPath(),A=0;A<g.length;A++)if(w=g[A],!!w.isActive&&(d=w.collision,w.activeContacts.length>0)){var V=w.activeContacts[0].vertex.x,F=w.activeContacts[0].vertex.y;w.activeContacts.length===2&&(V=(w.activeContacts[0].vertex.x+w.activeContacts[1].vertex.x)/2,F=(w.activeContacts[0].vertex.y+w.activeContacts[1].vertex.y)/2),d.bodyB===d.supports[0].body||d.bodyA.isStatic===!0?x.moveTo(V-d.normal.x*8,F-d.normal.y*8):x.moveTo(V+d.normal.x*8,F+d.normal.y*8),x.lineTo(V,F)}S.wireframes?x.strokeStyle="rgba(255,165,0,0.7)":x.strokeStyle="orange",x.lineWidth=1,x.stroke()},e.separations=function(c,g,m){var x=m,S=c.options,w,d,M,P,I,A,E;for(x.beginPath(),A=0;A<g.length;A++)if(w=g[A],!!w.isActive){d=w.collision,P=d.bodyA,I=d.bodyB;var B=1;!I.isStatic&&!P.isStatic&&(B=.5),I.isStatic&&(B=0),x.moveTo(I.position.x,I.position.y),x.lineTo(I.position.x-d.penetration.x*B,I.position.y-d.penetration.y*B),B=1,!I.isStatic&&!P.isStatic&&(B=.5),P.isStatic&&(B=0),x.moveTo(P.position.x,P.position.y),x.lineTo(P.position.x+d.penetration.x*B,P.position.y+d.penetration.y*B)}S.wireframes?x.strokeStyle="rgba(255,165,0,0.5)":x.strokeStyle="orange",x.stroke()},e.inspector=function(c,g){var m=c.engine,x=c.selected,S=c.render,w=S.options,d;if(w.hasBounds){var M=S.bounds.max.x-S.bounds.min.x,P=S.bounds.max.y-S.bounds.min.y,I=M/S.options.width,A=P/S.options.height;g.scale(1/I,1/A),g.translate(-S.bounds.min.x,-S.bounds.min.y)}for(var E=0;E<x.length;E++){var B=x[E].data;switch(g.translate(.5,.5),g.lineWidth=1,g.strokeStyle="rgba(255,165,0,0.9)",g.setLineDash([1,2]),B.type){case"body":d=B.bounds,g.beginPath(),g.rect(Math.floor(d.min.x-3),Math.floor(d.min.y-3),Math.floor(d.max.x-d.min.x+6),Math.floor(d.max.y-d.min.y+6)),g.closePath(),g.stroke();break;case"constraint":var L=B.pointA;B.bodyA&&(L=B.pointB),g.beginPath(),g.arc(L.x,L.y,10,0,2*Math.PI),g.closePath(),g.stroke();break}g.setLineDash([]),g.translate(-.5,-.5)}c.selectStart!==null&&(g.translate(.5,.5),g.lineWidth=1,g.strokeStyle="rgba(255,165,0,0.6)",g.fillStyle="rgba(255,165,0,0.1)",d=c.selectBounds,g.beginPath(),g.rect(Math.floor(d.min.x),Math.floor(d.min.y),Math.floor(d.max.x-d.min.x),Math.floor(d.max.y-d.min.y)),g.closePath(),g.stroke(),g.fill(),g.translate(-.5,-.5)),w.hasBounds&&g.setTransform(1,0,0,1,0,0)};var t=function(c,g){var m=c.engine,x=c.timing,S=x.historySize,w=m.timing.timestamp;x.delta=g-x.lastTime||e._goodDelta,x.lastTime=g,x.timestampElapsed=w-x.lastTimestamp||0,x.lastTimestamp=w,x.deltaHistory.unshift(x.delta),x.deltaHistory.length=Math.min(x.deltaHistory.length,S),x.engineDeltaHistory.unshift(m.timing.lastDelta),x.engineDeltaHistory.length=Math.min(x.engineDeltaHistory.length,S),x.timestampElapsedHistory.unshift(x.timestampElapsed),x.timestampElapsedHistory.length=Math.min(x.timestampElapsedHistory.length,S),x.engineElapsedHistory.unshift(m.timing.lastElapsed),x.engineElapsedHistory.length=Math.min(x.engineElapsedHistory.length,S),x.elapsedHistory.unshift(x.lastElapsed),x.elapsedHistory.length=Math.min(x.elapsedHistory.length,S)},n=function(c){for(var g=0,m=0;m<c.length;m+=1)g+=c[m];return g/c.length||0},v=function(c,g){var m=document.createElement("canvas");return m.width=c,m.height=g,m.oncontextmenu=function(){return!1},m.onselectstart=function(){return!1},m},u=function(c){var g=c.getContext("2d"),m=window.devicePixelRatio||1,x=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;return m/x},y=function(c,g){var m=c.textures[g];return m||(m=c.textures[g]=new Image,m.src=g,m)},C=function(c,g){var m=g;/(jpg|gif|png)$/.test(g)&&(m="url("+g+")"),c.canvas.style.background=m,c.canvas.style.backgroundSize="contain",c.currentBackground=g}})()},function(T,R){var p={};T.exports=p,function(){p.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(T,R,p){var e={};T.exports=e;var o=p(7),s=p(19),i=p(14),h=p(20),a=p(4),f=p(5),r=p(10),l=p(0),t=p(6);(function(){e.create=function(n){n=n||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},u=l.extend(v,n);return u.world=n.world||f.create({label:"World"}),u.pairs=n.pairs||h.create(),u.detector=n.detector||i.create(),u.grid={buckets:[]},u.world.gravity=u.gravity,u.broadphase=u.grid,u.metrics={},u},e.update=function(n,v,u){var y=l.now();v=v||1e3/60,u=u||1;var C=n.world,c=n.detector,g=n.pairs,m=n.timing,x=m.timestamp,S;m.timestamp+=v*m.timeScale,m.lastDelta=v*m.timeScale;var w={timestamp:m.timestamp};a.trigger(n,"beforeUpdate",w);var d=f.allBodies(C),M=f.allConstraints(C);for(C.isModified&&i.setBodies(c,d),C.isModified&&f.setModified(C,!1,!1,!0),n.enableSleeping&&o.update(d,m.timeScale),e._bodiesApplyGravity(d,n.gravity),e._bodiesUpdate(d,v,m.timeScale,u,C.bounds),r.preSolveAll(d),S=0;S<n.constraintIterations;S++)r.solveAll(M,m.timeScale);r.postSolveAll(d),c.pairs=n.pairs;var P=i.collisions(c);for(h.update(g,P,x),n.enableSleeping&&o.afterCollisions(g.list,m.timeScale),g.collisionStart.length>0&&a.trigger(n,"collisionStart",{pairs:g.collisionStart}),s.preSolvePosition(g.list),S=0;S<n.positionIterations;S++)s.solvePosition(g.list,m.timeScale);for(s.postSolvePosition(d),r.preSolveAll(d),S=0;S<n.constraintIterations;S++)r.solveAll(M,m.timeScale);for(r.postSolveAll(d),s.preSolveVelocity(g.list),S=0;S<n.velocityIterations;S++)s.solveVelocity(g.list,m.timeScale);return g.collisionActive.length>0&&a.trigger(n,"collisionActive",{pairs:g.collisionActive}),g.collisionEnd.length>0&&a.trigger(n,"collisionEnd",{pairs:g.collisionEnd}),e._bodiesClearForces(d),a.trigger(n,"afterUpdate",w),n.timing.lastElapsed=l.now()-y,n},e.merge=function(n,v){if(l.extend(n,v),v.world){n.world=v.world,e.clear(n);for(var u=f.allBodies(n.world),y=0;y<u.length;y++){var C=u[y];o.set(C,!1),C.id=l.nextId()}}},e.clear=function(n){h.clear(n.pairs),i.clear(n.detector)},e._bodiesClearForces=function(n){for(var v=0;v<n.length;v++){var u=n[v];u.force.x=0,u.force.y=0,u.torque=0}},e._bodiesApplyGravity=function(n,v){var u=typeof v.scale<"u"?v.scale:.001;if(!(v.x===0&&v.y===0||u===0))for(var y=0;y<n.length;y++){var C=n[y];C.isStatic||C.isSleeping||(C.force.y+=C.mass*v.y*u,C.force.x+=C.mass*v.x*u)}},e._bodiesUpdate=function(n,v,u,y,C){for(var c=0;c<n.length;c++){var g=n[c];g.isStatic||g.isSleeping||t.update(g,v,u,y)}}})()},function(T,R,p){var e={};T.exports=e;var o=p(3),s=p(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(i){var h,a,f,r=i.length;for(h=0;h<r;h++)a=i[h],a.isActive&&(f=a.activeContacts.length,a.collision.parentA.totalContacts+=f,a.collision.parentB.totalContacts+=f)},e.solvePosition=function(i,h){var a,f,r,l,t,n,v,u,y=e._positionDampen,C=i.length;for(a=0;a<C;a++)f=i[a],!(!f.isActive||f.isSensor)&&(r=f.collision,l=r.parentA,t=r.parentB,n=r.normal,f.separation=n.x*(t.positionImpulse.x+r.penetration.x-l.positionImpulse.x)+n.y*(t.positionImpulse.y+r.penetration.y-l.positionImpulse.y));for(a=0;a<C;a++)f=i[a],!(!f.isActive||f.isSensor)&&(r=f.collision,l=r.parentA,t=r.parentB,n=r.normal,u=(f.separation-f.slop)*h,(l.isStatic||t.isStatic)&&(u*=2),l.isStatic||l.isSleeping||(v=y/l.totalContacts,l.positionImpulse.x+=n.x*u*v,l.positionImpulse.y+=n.y*u*v),t.isStatic||t.isSleeping||(v=y/t.totalContacts,t.positionImpulse.x-=n.x*u*v,t.positionImpulse.y-=n.y*u*v))},e.postSolvePosition=function(i){for(var h=e._positionWarming,a=i.length,f=o.translate,r=s.update,l=0;l<a;l++){var t=i[l],n=t.positionImpulse,v=n.x,u=n.y,y=t.velocity;if(t.totalContacts=0,v!==0||u!==0){for(var C=0;C<t.parts.length;C++){var c=t.parts[C];f(c.vertices,n),r(c.bounds,c.vertices,y),c.position.x+=v,c.position.y+=u}t.positionPrev.x+=v,t.positionPrev.y+=u,v*y.x+u*y.y<0?(n.x=0,n.y=0):(n.x*=h,n.y*=h)}}},e.preSolveVelocity=function(i){var h=i.length,a,f;for(a=0;a<h;a++){var r=i[a];if(!(!r.isActive||r.isSensor)){var l=r.activeContacts,t=l.length,n=r.collision,v=n.parentA,u=n.parentB,y=n.normal,C=n.tangent;for(f=0;f<t;f++){var c=l[f],g=c.vertex,m=c.normalImpulse,x=c.tangentImpulse;if(m!==0||x!==0){var S=y.x*m+C.x*x,w=y.y*m+C.y*x;v.isStatic||v.isSleeping||(v.positionPrev.x+=S*v.inverseMass,v.positionPrev.y+=w*v.inverseMass,v.anglePrev+=v.inverseInertia*((g.x-v.position.x)*w-(g.y-v.position.y)*S)),u.isStatic||u.isSleeping||(u.positionPrev.x-=S*u.inverseMass,u.positionPrev.y-=w*u.inverseMass,u.anglePrev-=u.inverseInertia*((g.x-u.position.x)*w-(g.y-u.position.y)*S))}}}}},e.solveVelocity=function(i,h){var a=h*h,f=e._restingThresh*a,r=e._frictionNormalMultiplier,l=e._restingThreshTangent*a,t=Number.MAX_VALUE,n=i.length,v,u,y,C;for(y=0;y<n;y++){var c=i[y];if(!(!c.isActive||c.isSensor)){var g=c.collision,m=g.parentA,x=g.parentB,S=m.velocity,w=x.velocity,d=g.normal.x,M=g.normal.y,P=g.tangent.x,I=g.tangent.y,A=c.activeContacts,E=A.length,B=1/E,L=m.inverseMass+x.inverseMass,V=c.friction*c.frictionStatic*r*a;for(S.x=m.position.x-m.positionPrev.x,S.y=m.position.y-m.positionPrev.y,w.x=x.position.x-x.positionPrev.x,w.y=x.position.y-x.positionPrev.y,m.angularVelocity=m.angle-m.anglePrev,x.angularVelocity=x.angle-x.anglePrev,C=0;C<E;C++){var F=A[C],D=F.vertex,O=D.x-m.position.x,k=D.y-m.position.y,H=D.x-x.position.x,z=D.y-x.position.y,N=S.x-k*m.angularVelocity,G=S.y+O*m.angularVelocity,U=w.x-z*x.angularVelocity,se=w.y+H*x.angularVelocity,q=N-U,b=G-se,Q=d*q+M*b,K=P*q+I*b,_=c.separation+Q,Y=Math.min(_,1);Y=_<0?0:Y;var ee=Y*V;K>ee||-K>ee?(u=K>0?K:-K,v=c.friction*(K>0?1:-1)*a,v<-u?v=-u:v>u&&(v=u)):(v=K,u=t);var te=O*M-k*d,ne=H*M-z*d,ie=B/(L+m.inverseInertia*te*te+x.inverseInertia*ne*ne),$=(1+c.restitution)*Q*ie;if(v*=ie,Q*Q>f&&Q<0)F.normalImpulse=0;else{var oe=F.normalImpulse;F.normalImpulse+=$,F.normalImpulse=Math.min(F.normalImpulse,0),$=F.normalImpulse-oe}if(K*K>l)F.tangentImpulse=0;else{var le=F.tangentImpulse;F.tangentImpulse+=v,F.tangentImpulse<-u&&(F.tangentImpulse=-u),F.tangentImpulse>u&&(F.tangentImpulse=u),v=F.tangentImpulse-le}var J=d*$+P*v,X=M*$+I*v;m.isStatic||m.isSleeping||(m.positionPrev.x+=J*m.inverseMass,m.positionPrev.y+=X*m.inverseMass,m.anglePrev+=(O*X-k*J)*m.inverseInertia),x.isStatic||x.isSleeping||(x.positionPrev.x-=J*x.inverseMass,x.positionPrev.y-=X*x.inverseMass,x.anglePrev-=(H*X-z*J)*x.inverseInertia)}}}}})()},function(T,R,p){var e={};T.exports=e;var o=p(9),s=p(0);(function(){e.create=function(i){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},i)},e.update=function(i,h,a){var f=i.list,r=f.length,l=i.table,t=h.length,n=i.collisionStart,v=i.collisionEnd,u=i.collisionActive,y,C,c,g;for(n.length=0,v.length=0,u.length=0,g=0;g<r;g++)f[g].confirmedActive=!1;for(g=0;g<t;g++)y=h[g],c=y.pair,c?(c.isActive?u.push(c):n.push(c),o.update(c,y,a),c.confirmedActive=!0):(c=o.create(y,a),l[c.id]=c,n.push(c),f.push(c));var m=[];for(r=f.length,g=0;g<r;g++)c=f[g],c.confirmedActive||(o.setActive(c,!1,a),v.push(c),!c.collision.bodyA.isSleeping&&!c.collision.bodyB.isSleeping&&m.push(g));for(g=0;g<m.length;g++)C=m[g]-g,c=f[C],f.splice(C,1),delete l[c.id]},e.clear=function(i){return i.table={},i.list.length=0,i.collisionStart.length=0,i.collisionActive.length=0,i.collisionEnd.length=0,i}})()},function(T,R,p){var e=T.exports=p(22);e.Axes=p(11),e.Bodies=p(12),e.Body=p(6),e.Bounds=p(1),e.Collision=p(8),e.Common=p(0),e.Composite=p(5),e.Composites=p(23),e.Constraint=p(10),e.Contact=p(17),e.Detector=p(14),e.Engine=p(18),e.Events=p(4),e.Grid=p(24),e.Mouse=p(13),e.MouseConstraint=p(25),e.Pair=p(9),e.Pairs=p(20),e.Plugin=p(15),e.Query=p(26),e.Render=p(16),e.Resolver=p(19),e.Runner=p(27),e.SAT=p(28),e.Sleeping=p(7),e.Svg=p(29),e.Vector=p(2),e.Vertices=p(3),e.World=p(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(T,R,p){var e={};T.exports=e;var o=p(15),s=p(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){o.use(e,Array.prototype.slice.call(arguments))},e.before=function(i,h){return i=i.replace(/^Matter./,""),s.chainPathBefore(e,i,h)},e.after=function(i,h){return i=i.replace(/^Matter./,""),s.chainPathAfter(e,i,h)}})()},function(T,R,p){var e={};T.exports=e;var o=p(5),s=p(10),i=p(0),h=p(6),a=p(12),f=i.deprecated;(function(){e.stack=function(r,l,t,n,v,u,y){for(var C=o.create({label:"Stack"}),c=r,g=l,m,x=0,S=0;S<n;S++){for(var w=0,d=0;d<t;d++){var M=y(c,g,d,S,m,x);if(M){var P=M.bounds.max.y-M.bounds.min.y,I=M.bounds.max.x-M.bounds.min.x;P>w&&(w=P),h.translate(M,{x:I*.5,y:P*.5}),c=M.bounds.max.x+v,o.addBody(C,M),m=M,x+=1}else c+=v}g+=w+u,c=r}return C},e.chain=function(r,l,t,n,v,u){for(var y=r.bodies,C=1;C<y.length;C++){var c=y[C-1],g=y[C],m=c.bounds.max.y-c.bounds.min.y,x=c.bounds.max.x-c.bounds.min.x,S=g.bounds.max.y-g.bounds.min.y,w=g.bounds.max.x-g.bounds.min.x,d={bodyA:c,pointA:{x:x*l,y:m*t},bodyB:g,pointB:{x:w*n,y:S*v}},M=i.extend(d,u);o.addConstraint(r,s.create(M))}return r.label+=" Chain",r},e.mesh=function(r,l,t,n,v){var u=r.bodies,y,C,c,g,m;for(y=0;y<t;y++){for(C=1;C<l;C++)c=u[C-1+y*l],g=u[C+y*l],o.addConstraint(r,s.create(i.extend({bodyA:c,bodyB:g},v)));if(y>0)for(C=0;C<l;C++)c=u[C+(y-1)*l],g=u[C+y*l],o.addConstraint(r,s.create(i.extend({bodyA:c,bodyB:g},v))),n&&C>0&&(m=u[C-1+(y-1)*l],o.addConstraint(r,s.create(i.extend({bodyA:m,bodyB:g},v)))),n&&C<l-1&&(m=u[C+1+(y-1)*l],o.addConstraint(r,s.create(i.extend({bodyA:m,bodyB:g},v))))}return r.label+=" Mesh",r},e.pyramid=function(r,l,t,n,v,u,y){return e.stack(r,l,t,n,v,u,function(C,c,g,m,x,S){var w=Math.min(n,Math.ceil(t/2)),d=x?x.bounds.max.x-x.bounds.min.x:0;if(!(m>w)){m=w-m;var M=m,P=t-1-m;if(!(g<M||g>P)){S===1&&h.translate(x,{x:(g+(t%2===1?1:-1))*d,y:0});var I=x?g*d:0;return y(r+I+g*v,c,g,m,x,S)}}})},e.newtonsCradle=function(r,l,t,n,v){for(var u=o.create({label:"Newtons Cradle"}),y=0;y<t;y++){var C=1.9,c=a.circle(r+y*(n*C),l+v,n,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),g=s.create({pointA:{x:r+y*(n*C),y:l},bodyB:c});o.addBody(u,c),o.addConstraint(u,g)}return u},f(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(r,l,t,n,v){var u=h.nextGroup(!0),y=20,C=-t*.5+y,c=t*.5-y,g=0,m=o.create({label:"Car"}),x=a.rectangle(r,l,t,n,{collisionFilter:{group:u},chamfer:{radius:n*.5},density:2e-4}),S=a.circle(r+C,l+g,v,{collisionFilter:{group:u},friction:.8}),w=a.circle(r+c,l+g,v,{collisionFilter:{group:u},friction:.8}),d=s.create({bodyB:x,pointB:{x:C,y:g},bodyA:S,stiffness:1,length:0}),M=s.create({bodyB:x,pointB:{x:c,y:g},bodyA:w,stiffness:1,length:0});return o.addBody(m,x),o.addBody(m,S),o.addBody(m,w),o.addConstraint(m,d),o.addConstraint(m,M),m},f(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(r,l,t,n,v,u,y,C,c,g){c=i.extend({inertia:1/0},c),g=i.extend({stiffness:.2,render:{type:"line",anchors:!1}},g);var m=e.stack(r,l,t,n,v,u,function(x,S){return a.circle(x,S,C,c)});return e.mesh(m,t,n,y,g),m.label="Soft Body",m},f(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(T,R,p){var e={};T.exports=e;var o=p(9),s=p(0),i=s.deprecated;(function(){e.create=function(h){var a={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return s.extend(a,h)},e.update=function(h,a,f,r){var l,t,n,v=f.world,u=h.buckets,y,C,c=!1;for(l=0;l<a.length;l++){var g=a[l];if(!(g.isSleeping&&!r)&&!(v.bounds&&(g.bounds.max.x<v.bounds.min.x||g.bounds.min.x>v.bounds.max.x||g.bounds.max.y<v.bounds.min.y||g.bounds.min.y>v.bounds.max.y))){var m=e._getRegion(h,g);if(!g.region||m.id!==g.region.id||r){(!g.region||r)&&(g.region=m);var x=e._regionUnion(m,g.region);for(t=x.startCol;t<=x.endCol;t++)for(n=x.startRow;n<=x.endRow;n++){C=e._getBucketId(t,n),y=u[C];var S=t>=m.startCol&&t<=m.endCol&&n>=m.startRow&&n<=m.endRow,w=t>=g.region.startCol&&t<=g.region.endCol&&n>=g.region.startRow&&n<=g.region.endRow;!S&&w&&w&&y&&e._bucketRemoveBody(h,y,g),(g.region===m||S&&!w||r)&&(y||(y=e._createBucket(u,C)),e._bucketAddBody(h,y,g))}g.region=m,c=!0}}}c&&(h.pairsList=e._createActivePairsList(h))},i(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(h){h.buckets={},h.pairs={},h.pairsList=[]},i(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(h,a){var f=Math.min(h.startCol,a.startCol),r=Math.max(h.endCol,a.endCol),l=Math.min(h.startRow,a.startRow),t=Math.max(h.endRow,a.endRow);return e._createRegion(f,r,l,t)},e._getRegion=function(h,a){var f=a.bounds,r=Math.floor(f.min.x/h.bucketWidth),l=Math.floor(f.max.x/h.bucketWidth),t=Math.floor(f.min.y/h.bucketHeight),n=Math.floor(f.max.y/h.bucketHeight);return e._createRegion(r,l,t,n)},e._createRegion=function(h,a,f,r){return{id:h+","+a+","+f+","+r,startCol:h,endCol:a,startRow:f,endRow:r}},e._getBucketId=function(h,a){return"C"+h+"R"+a},e._createBucket=function(h,a){var f=h[a]=[];return f},e._bucketAddBody=function(h,a,f){var r=h.pairs,l=o.id,t=a.length,n;for(n=0;n<t;n++){var v=a[n];if(!(f.id===v.id||f.isStatic&&v.isStatic)){var u=l(f,v),y=r[u];y?y[2]+=1:r[u]=[f,v,1]}}a.push(f)},e._bucketRemoveBody=function(h,a,f){var r=h.pairs,l=o.id,t;a.splice(s.indexOf(a,f),1);var n=a.length;for(t=0;t<n;t++){var v=r[l(f,a[t])];v&&(v[2]-=1)}},e._createActivePairsList=function(h){var a,f=h.pairs,r=s.keys(f),l=r.length,t=[],n;for(n=0;n<l;n++)a=f[r[n]],a[2]>0?t.push(a):delete f[r[n]];return t}})()},function(T,R,p){var e={};T.exports=e;var o=p(3),s=p(7),i=p(13),h=p(4),a=p(14),f=p(10),r=p(5),l=p(0),t=p(1);(function(){e.create=function(n,v){var u=(n?n.mouse:null)||(v?v.mouse:null);u||(n&&n.render&&n.render.canvas?u=i.create(n.render.canvas):v&&v.element?u=i.create(v.element):(u=i.create(),l.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var y=f.create({label:"Mouse Constraint",pointA:u.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),C={type:"mouseConstraint",mouse:u,element:null,body:null,constraint:y,collisionFilter:{category:1,mask:4294967295,group:0}},c=l.extend(C,v);return h.on(n,"beforeUpdate",function(){var g=r.allBodies(n.world);e.update(c,g),e._triggerEvents(c)}),c},e.update=function(n,v){var u=n.mouse,y=n.constraint,C=n.body;if(u.button===0){if(y.bodyB)s.set(y.bodyB,!1),y.pointA=u.position;else for(var c=0;c<v.length;c++)if(C=v[c],t.contains(C.bounds,u.position)&&a.canCollide(C.collisionFilter,n.collisionFilter))for(var g=C.parts.length>1?1:0;g<C.parts.length;g++){var m=C.parts[g];if(o.contains(m.vertices,u.position)){y.pointA=u.position,y.bodyB=n.body=C,y.pointB={x:u.position.x-C.position.x,y:u.position.y-C.position.y},y.angleB=C.angle,s.set(C,!1),h.trigger(n,"startdrag",{mouse:u,body:C});break}}}else y.bodyB=n.body=null,y.pointB=null,C&&h.trigger(n,"enddrag",{mouse:u,body:C})},e._triggerEvents=function(n){var v=n.mouse,u=v.sourceEvents;u.mousemove&&h.trigger(n,"mousemove",{mouse:v}),u.mousedown&&h.trigger(n,"mousedown",{mouse:v}),u.mouseup&&h.trigger(n,"mouseup",{mouse:v}),i.clearSourceEvents(v)}})()},function(T,R,p){var e={};T.exports=e;var o=p(2),s=p(8),i=p(1),h=p(12),a=p(3);(function(){e.collides=function(f,r){for(var l=[],t=r.length,n=f.bounds,v=s.collides,u=i.overlaps,y=0;y<t;y++){var C=r[y],c=C.parts.length,g=c===1?0:1;if(u(C.bounds,n))for(var m=g;m<c;m++){var x=C.parts[m];if(u(x.bounds,n)){var S=v(x,f);if(S){l.push(S);break}}}}return l},e.ray=function(f,r,l,t){t=t||1e-100;for(var n=o.angle(r,l),v=o.magnitude(o.sub(r,l)),u=(l.x+r.x)*.5,y=(l.y+r.y)*.5,C=h.rectangle(u,y,v,t,{angle:n}),c=e.collides(C,f),g=0;g<c.length;g+=1){var m=c[g];m.body=m.bodyB=m.bodyA}return c},e.region=function(f,r,l){for(var t=[],n=0;n<f.length;n++){var v=f[n],u=i.overlaps(v.bounds,r);(u&&!l||!u&&l)&&t.push(v)}return t},e.point=function(f,r){for(var l=[],t=0;t<f.length;t++){var n=f[t];if(i.contains(n.bounds,r))for(var v=n.parts.length===1?0:1;v<n.parts.length;v++){var u=n.parts[v];if(i.contains(u.bounds,r)&&a.contains(u.vertices,r)){l.push(n);break}}}return l}})()},function(T,R,p){var e={};T.exports=e;var o=p(4),s=p(18),i=p(0);(function(){var h,a;if(typeof window<"u"&&(h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!h){var f;h=function(r){f=setTimeout(function(){r(i.now())},1e3/60)},a=function(){clearTimeout(f)}}e.create=function(r){var l={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},t=i.extend(l,r);return t.delta=t.delta||1e3/t.fps,t.deltaMin=t.deltaMin||1e3/t.fps,t.deltaMax=t.deltaMax||1e3/(t.fps*.5),t.fps=1e3/t.delta,t},e.run=function(r,l){return typeof r.positionIterations<"u"&&(l=r,r=e.create()),function t(n){r.frameRequestId=h(t),n&&r.enabled&&e.tick(r,l,n)}(),r},e.tick=function(r,l,t){var n=l.timing,v=1,u,y={timestamp:n.timestamp};o.trigger(r,"beforeTick",y),r.isFixed?u=r.delta:(u=t-r.timePrev||r.delta,r.timePrev=t,r.deltaHistory.push(u),r.deltaHistory=r.deltaHistory.slice(-r.deltaSampleSize),u=Math.min.apply(null,r.deltaHistory),u=u<r.deltaMin?r.deltaMin:u,u=u>r.deltaMax?r.deltaMax:u,v=u/r.delta,r.delta=u),r.timeScalePrev!==0&&(v*=n.timeScale/r.timeScalePrev),n.timeScale===0&&(v=0),r.timeScalePrev=n.timeScale,r.correction=v,r.frameCounter+=1,t-r.counterTimestamp>=1e3&&(r.fps=r.frameCounter*((t-r.counterTimestamp)/1e3),r.counterTimestamp=t,r.frameCounter=0),o.trigger(r,"tick",y),o.trigger(r,"beforeUpdate",y),s.update(l,u,v),o.trigger(r,"afterUpdate",y),o.trigger(r,"afterTick",y)},e.stop=function(r){a(r.frameRequestId)},e.start=function(r,l){e.run(r,l)}})()},function(T,R,p){var e={};T.exports=e;var o=p(8),s=p(0),i=s.deprecated;(function(){e.collides=function(h,a){return o.collides(h,a)},i(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(T,R,p){var e={};T.exports=e;var o=p(1),s=p(0);(function(){e.pathToVertices=function(i,h){typeof window<"u"&&!("SVGPathSeg"in window)&&s.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var a,f,r,l,t,n,v,u,y,C,c=[],g,m,x=0,S=0,w=0;h=h||15;var d=function(P,I,A){var E=A%2===1&&A>1;if(!y||P!=y.x||I!=y.y){y&&E?(g=y.x,m=y.y):(g=0,m=0);var B={x:g+P,y:m+I};(E||!y)&&(y=B),c.push(B),S=g+P,w=m+I}},M=function(P){var I=P.pathSegTypeAsLetter.toUpperCase();if(I!=="Z"){switch(I){case"M":case"L":case"T":case"C":case"S":case"Q":S=P.x,w=P.y;break;case"H":S=P.x;break;case"V":w=P.y;break}d(S,w,P.pathSegType)}};for(e._svgPathToAbsolute(i),r=i.getTotalLength(),n=[],a=0;a<i.pathSegList.numberOfItems;a+=1)n.push(i.pathSegList.getItem(a));for(v=n.concat();x<r;){if(C=i.getPathSegAtLength(x),t=n[C],t!=u){for(;v.length&&v[0]!=t;)M(v.shift());u=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":l=i.getPointAtLength(x),d(l.x,l.y,0);break}x+=h}for(a=0,f=v.length;a<f;++a)M(v[a]);return c},e._svgPathToAbsolute=function(i){for(var h,a,f,r,l,t,n=i.pathSegList,v=0,u=0,y=n.numberOfItems,C=0;C<y;++C){var c=n.getItem(C),g=c.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(g))"x"in c&&(v=c.x),"y"in c&&(u=c.y);else switch("x1"in c&&(f=v+c.x1),"x2"in c&&(l=v+c.x2),"y1"in c&&(r=u+c.y1),"y2"in c&&(t=u+c.y2),"x"in c&&(v+=c.x),"y"in c&&(u+=c.y),g){case"m":n.replaceItem(i.createSVGPathSegMovetoAbs(v,u),C);break;case"l":n.replaceItem(i.createSVGPathSegLinetoAbs(v,u),C);break;case"h":n.replaceItem(i.createSVGPathSegLinetoHorizontalAbs(v),C);break;case"v":n.replaceItem(i.createSVGPathSegLinetoVerticalAbs(u),C);break;case"c":n.replaceItem(i.createSVGPathSegCurvetoCubicAbs(v,u,f,r,l,t),C);break;case"s":n.replaceItem(i.createSVGPathSegCurvetoCubicSmoothAbs(v,u,l,t),C);break;case"q":n.replaceItem(i.createSVGPathSegCurvetoQuadraticAbs(v,u,f,r),C);break;case"t":n.replaceItem(i.createSVGPathSegCurvetoQuadraticSmoothAbs(v,u),C);break;case"a":n.replaceItem(i.createSVGPathSegArcAbs(v,u,c.r1,c.r2,c.angle,c.largeArcFlag,c.sweepFlag),C);break;case"z":case"Z":v=h,u=a;break}(g=="M"||g=="m")&&(h=v,a=u)}}})()},function(T,R,p){var e={};T.exports=e;var o=p(5),s=p(0);(function(){e.create=o.create,e.add=o.add,e.remove=o.remove,e.clear=o.clear,e.addComposite=o.addComposite,e.addBody=o.addBody,e.addConstraint=o.addConstraint})()}])})});var W=me(ae()),pe="#wb-canvas-container",de="svg > path";function ye(){let R=document.querySelector(pe),p=document.querySelectorAll(de);if(!R)return;let e=R.getBoundingClientRect().width,o=R.getBoundingClientRect().height,s=W.default.Engine,i=W.default.Render,h=W.default.Runner,a=W.default.Bodies,f=W.default.Composite,r=W.default.Mouse,l=W.default.MouseConstraint,t=W.default.Svg,n=W.default.Vertices,v=s.create(),u=document.createElement("canvas");R.append(u);let y=i.create({canvas:u,engine:v,options:{width:e,height:o,background:"transparent",wireframes:!1,showAngleIndicator:!0}});(()=>{p.forEach((I,A)=>{console.log(t.pathToVertices(I,0));let E=a.fromVertices(A*100+100,0,[t.pathToVertices(I,0)],{render:{fillStyle:"black",strokeStyle:"black",lineWidth:1}});f.add(v.world,E)})})(),(()=>{let I=e/2,A=0,E=80,B=a.circle(I,A,E,{friction:.5,frictionAir:1e-5,restitution:.8,render:{fillStyle:"#F35e66",strokeStyle:"black"}});f.add(v.world,B)})();let g=a.rectangle(e/2,o+60/2,e*5,60,{isStatic:!0}),m=a.rectangle(e+60/2,o/2,60,o*5,{isStatic:!0}),x=a.rectangle(0-60/2,o/2,60,o*5,{isStatic:!0});f.add(v.world,[g,m,x]),i.run(y);let S=h.create();h.run(S,v);let w=r.create(y.canvas),d=l.create(v,{mouse:w,constraint:{stiffness:.2,render:{visible:!1}}});f.add(v.world,d);function M(I){e=I.getBoundingClientRect().width,o=I.getBoundingClientRect().height,y.canvas.width=e,y.canvas.height=o,W.default.Body.setPosition(g,W.default.Vector.create(e/2,o+60/2)),W.default.Body.setPosition(m,W.default.Vector.create(e+60/2,o/2))}d.mouse.element.removeEventListener("mousewheel",d.mouse.mousewheel),d.mouse.element.removeEventListener("DOMMouseScroll",d.mouse.mousewheel);let P=f.allBodies(v.world);console.log({bodies:P}),window.addEventListener("resize",()=>M(R))}document.addEventListener("DOMContentLoaded",ye);})();
/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
//# sourceMappingURL=index.js.map
